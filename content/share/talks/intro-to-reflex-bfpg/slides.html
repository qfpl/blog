<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Dave Laing">
  <title>Reflex: Front-end development done awesome</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="reveal.js/css/reveal.css">
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #303030; color: #cccccc; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #cccccc; background-color: #303030; }
code > span.kw { color: #f0dfaf; } /* Keyword */
code > span.dt { color: #dfdfbf; } /* DataType */
code > span.dv { color: #dcdccc; } /* DecVal */
code > span.bn { color: #dca3a3; } /* BaseN */
code > span.fl { color: #c0bed1; } /* Float */
code > span.ch { color: #dca3a3; } /* Char */
code > span.st { color: #cc9393; } /* String */
code > span.co { color: #7f9f7f; } /* Comment */
code > span.ot { color: #efef8f; } /* Other */
code > span.al { color: #ffcfaf; } /* Alert */
code > span.fu { color: #efef8f; } /* Function */
code > span.er { color: #c3bf9f; } /* Error */
code > span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */
code > span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code > span.sc { color: #dca3a3; } /* SpecialChar */
code > span.vs { color: #cc9393; } /* VerbatimString */
code > span.ss { color: #cc9393; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { } /* Variable */
code > span.cf { color: #f0dfaf; } /* ControlFlow */
code > span.op { color: #f0efd0; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code > span.at { } /* Attribute */
code > span.do { color: #7f9f7f; } /* Documentation */
code > span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code > span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code > span.in { color: #7f9f7f; font-weight: bold; } /* Information */
  </style>
  <link rel="stylesheet" href="reveal.js/css/theme/black.css" id="theme">
<link rel="stylesheet" href="css/tweak.css">
<link rel="stylesheet" href="css/grid-dark.css">
<link rel="stylesheet" href="css/fizzbuzz.css">
<link rel="stylesheet" href="css/todo.css">
  <script language="javascript" src="js/examples.min.js"></script>
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="reveal.js/lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div id="grid-setup"></div>
  <div class="reveal">
    <div class="slides">

<section>
  <h1 class="title">Reflex: Front-end development done awesome</h1>
  <p class="author">Dave Laing</p>
<img src="images/data61-csiro.jpg" alt="data61" height="100px">
</section>

<section><section id="introduction" class="titleslide slide level1"><h1>Introduction</h1></section><section id="what-is-the-virtual-dom" class="slide level2">
<h2>What is the virtual DOM?</h2>
<!--
Several frameworks have popped up which use the virtual DOM for creating web applications

##

Working on the DOM directly is slow, so the virtual DOM uses an alternate data structure and has efficient diff and patch methods to translate changes in the virtual DOM to changes in the actual DOM

##

There is something nice and functional about being able to work with something that feels like it has the type
-->
</section><section id="section" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="dt">DOM</span> <span class="ot">-&gt;</span> <span class="dt">DOM</span></code></pre></div>
<!--
##

The assumption made by a lot of FP approaches to the virtual DOM is that the DOM is stateless 

##

Lots of things in the DOM have state

##

The classic example is a text input

##

If you're treating the DOM as stateless, you're going to be continually eating pain when dealing with stateful things

##

It will most likely get worse when you deal with collections

##

Reactjs has the stateless "elements" and locally-stateful "components"

##

This can help avoid some pain

##

Either way, you still have to deal with a mutating tree which potentially has mutating state at every node and every leaf

##

(With reactjs and components the types are different / a bit more abstract)

##

Historically, that has led to bad times
-->
</section><section id="what-is-frp" class="slide level2">
<h2>What is FRP?</h2>
<!--
FRP is a way of creating and using first-class values which manage changes to values over time, in a functional programming setting.

##

Proper FRP has

- precise semantics
- support for continuous time
-->
</section><section id="section-1" class="slide level2">
<h2></h2>
<ul>
<li>Precise semantics</li>
</ul>
</section><section id="section-2" class="slide level2">
<h2></h2>
<ul>
<li>Supports continuous time</li>
</ul>
</section><section id="what-is-reflex" class="slide level2">
<h2>What is Reflex?</h2>
<!--
Reflex is a Functional Reactive Programming (FRP) library wrttien for Haskell which was developed to do front-end development.

##

There is a big focus on performance in `reflex`.

##

`reflex` has precise semantics but does not support working with continuous time

##

The focus is instead on the observable moments of time

##

These come from mouse clicks and key presses and clock ticks

##

We have a library that does 

> - high performance management of state
> - where the pieces of state are first class values
> - and supports all kinds of higher-order usage and abstaction
-->
</section><section id="section-3" class="slide level2">
<h2></h2>
<ul>
<li>Precise semantics</li>
</ul>
</section><section id="section-4" class="slide level2">
<h2></h2>
<ul>
<li>Discrete time</li>
</ul>
</section><section id="section-5" class="slide level2">
<h2></h2>
<ul>
<li>High performance</li>
</ul>
</section><section id="section-6" class="slide level2">
<h2></h2>
<ul>
<li>Higher order usage</li>
</ul>
</section></section>
<section><section id="getting-started" class="titleslide slide level1"><h1>Getting started</h1></section><section id="section-7" class="slide level2">
<h2></h2>
<pre><code>&gt; git clone https://github.com/reflex-frp/reflex-platform</code></pre>
</section><section id="section-8" class="slide level2">
<h2></h2>
<pre><code>&gt; cd my-cabal-project
&gt; PATH_TO_REFLEX_PLATFORM/work-on ghcjs ./.
&gt; cabal configure --ghcjs</code></pre>
</section><section id="section-9" class="slide level2">
<h2></h2>
<pre><code>&gt; cd my-cabal-project
&gt; PATH_TO_REFLEX_PLATFORM/work-on ghc ./.
&gt; cabal configure</code></pre>
<!--
##

Uses Nix under the hood to manage the compilers and dependencies

##

More on development workflow in part 2...
-->
</section></section>
<section><section id="event" class="titleslide slide level1"><h1><code>Event</code></h1></section><section id="section-10" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Event</span> t a



 </code></pre></div>
</section><section id="section-11" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Event</span> t a

  <span class="fu">~</span>

[(t, a)] </code></pre></div>
<!--
##

has values of type `a` at particular points in time


##

The observable points of time are also known as frames

##

Every external triggered event happens in its own frame

##

So we're dealing with something like event-sourcing ...

##

... if it was created by mathematicians instead of consultants
-->
</section><section id="section-12" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">eOutput <span class="fu">=</span> eInput</code></pre></div>
<div id="examples-events-frame">

</div>
<!-- 
## 

`Event`s derived from other `Event`s can occur in the same frame.

## 

There is an obvious way that this can happen
-->
</section><section id="section-13" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> <span class="dt">Functor</span> (<span class="dt">Event</span> t) <span class="kw">where</span> <span class="fu">...</span></code></pre></div>
</section><section id="section-14" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">flipColour ::</span> <span class="dt">Colour</span> <span class="ot">-&gt;</span> <span class="dt">Colour</span>
flipColour <span class="dt">Red</span>  <span class="fu">=</span> <span class="dt">Blue</span>
flipColour <span class="dt">Blue</span> <span class="fu">=</span> <span class="dt">Red</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">eOutput <span class="fu">=</span> flipColour <span class="fu">&lt;$&gt;</span> eInput</code></pre></div>
<div id="examples-events-flipper">

</div>
</section><section id="section-15" class="slide level2">
<h2></h2>
<!-- We tend to use `<$` often in FRP -->
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">(&lt;$) ::</span> <span class="dt">Functor</span> f <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> f b <span class="ot">-&gt;</span> f a</code></pre></div>
</section><section id="section-16" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">eOutput <span class="fu">=</span> <span class="dt">Blue</span> <span class="fu">&lt;$</span> eInput</code></pre></div>
<div id="examples-events-blue">

</div>
</section><section id="section-17" class="slide level2">
<h2></h2>
<!--
We can create an `Event` which fires in _some_ of the frames that another `Event` is firing in.

##

The simplest way to do that is to filter an `Event` with a predicate:
-->
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">ffilter ::</span> <span class="dt">Reflex</span> t
        <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> <span class="dt">Bool</span>) 
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t a 
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t a</code></pre></div>
</section><section id="section-18" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">isRed ::</span> <span class="dt">Colour</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>
isRed <span class="dt">Red</span>  <span class="fu">=</span> <span class="dt">True</span>
isRed <span class="dt">Blue</span> <span class="fu">=</span> <span class="dt">False</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">eOutput <span class="fu">=</span> ffilter isRed eInput</code></pre></div>
<div id="examples-events-red">

</div>
</section><section id="section-19" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">fmapMaybe ::</span> <span class="dt">Reflex</span> t 
          <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> <span class="dt">Maybe</span> b) 
          <span class="ot">-&gt;</span> <span class="dt">Event</span> t a 
          <span class="ot">-&gt;</span> <span class="dt">Event</span> t b</code></pre></div>
</section><section id="section-20" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">parseColour ::</span> <span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Colour</span>
parseColour <span class="st">&quot;Red&quot;</span>  <span class="fu">=</span> <span class="dt">Just</span> <span class="dt">Red</span>
parseColour <span class="st">&quot;Blue&quot;</span> <span class="fu">=</span> <span class="dt">Just</span> <span class="dt">Blue</span>
parseColour _      <span class="fu">=</span> <span class="dt">Nothing</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">eOutput <span class="fu">=</span> fmapMaybe parseColour eInput</code></pre></div>
<div id="examples-events-parse">

</div>
</section><section id="section-21" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">fmapMaybe    ::</span> <span class="dt">Reflex</span> t 
             <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> <span class="dt">Maybe</span> b)
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t a
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t b</code></pre></div>
</section><section id="section-22" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">fmapMaybe<span class="ot"> id ::</span> <span class="dt">Reflex</span> t 
             <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> <span class="dt">Maybe</span> b)
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t a
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t b</code></pre></div>
</section><section id="section-23" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">fmapMaybe<span class="ot"> id ::</span> <span class="dt">Reflex</span> t 
             <span class="ot">=&gt;</span> 
                <span class="dt">Event</span> t (<span class="dt">Maybe</span> c) 
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t c</code></pre></div>
<!--
##

```haskell
fanEither :: Reflex t 
          => Event t (Either a b) 
          -> (Event t a, Event t b)
```

##

```haskell
splitColour :: Colour -> Either () ()
splitColour Red  = Left ()
splitColour Blue = Right ()
```

```haskell
(eLeft, eRight) = fanEither (splitColour <$> eInput)
```

<div id="examples-events-either"></div>
-->
<!--
##

We can create `Event`s that might be occurring in the same frame as other `Event`s

##

That means when we want to work with multiple `Event`s, we need to be able to handle the case where several `Event`s are active in the same frame.

##

Let's set up some `Event`s that occasionally happen simultaneously
-->
</section><section id="section-24" class="slide level2">
<h2></h2>
<!--Assume we have access to-->
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eCount ::</span> <span class="dt">Event</span> t <span class="dt">Int</span></code></pre></div>
</section><section id="section-25" class="slide level2">
<h2></h2>
<!--Then-->
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eFizz ::</span> <span class="dt">Event</span> t <span class="dt">Text</span>
eFizz <span class="fu">=</span> <span class="st">&quot;Fizz&quot;</span> <span class="fu">&lt;$</span> ffilter ((<span class="fu">==</span> <span class="dv">0</span>) <span class="fu">.</span> (<span class="ot">`mod`</span> <span class="dv">3</span>)) eCount</code></pre></div>
<!--and-->
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eBuzz ::</span> <span class="dt">Event</span> t <span class="dt">Text</span>
eBuzz <span class="fu">=</span> <span class="st">&quot;Buzz&quot;</span> <span class="fu">&lt;$</span> ffilter ((<span class="fu">==</span> <span class="dv">0</span>) <span class="fu">.</span> (<span class="ot">`mod`</span> <span class="dv">5</span>)) eCount</code></pre></div>
<!--will occasionally collide.-->
</section><section id="section-26" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eFizz ::</span> <span class="dt">Event</span> t <span class="dt">Text</span>
eFizz <span class="fu">=</span> <span class="st">&quot;Fizz&quot;</span> <span class="fu">&lt;$</span> ffilter ((<span class="fu">==</span> <span class="dv">0</span>) <span class="fu">.</span> (<span class="ot">`mod`</span> <span class="dv">3</span>)) eCount</code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eBuzz ::</span> <span class="dt">Event</span> t <span class="dt">Text</span>
eBuzz <span class="fu">=</span> <span class="st">&quot;Buzz&quot;</span> <span class="fu">&lt;$</span> ffilter ((<span class="fu">==</span> <span class="dv">0</span>) <span class="fu">.</span> (<span class="ot">`mod`</span> <span class="dv">5</span>)) eCount</code></pre></div>
<div id="examples-events-fizz-and-buzz">

</div>
<!--
##

What can we do about the collisions?
-->
</section><section id="section-27" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">leftmost ::</span> [<span class="dt">Event</span> t a] <span class="ot">-&gt;</span> <span class="dt">Event</span> t a</code></pre></div>
</section><section id="section-28" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eLeft ::</span> <span class="dt">Event</span> t <span class="dt">Text</span>
eLeft <span class="fu">=</span> leftmost [eFizz, eBuzz]</code></pre></div>
<div id="examples-events-leftmost">

</div>
</section><section id="section-29" class="slide level2">
<h2></h2>
<!-- Side note: We've been using this in the first set of examples: -->
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">eInput <span class="fu">=</span> leftmost [<span class="dt">Red</span> <span class="fu">&lt;$</span> eRed, <span class="dt">Blue</span> <span class="fu">&lt;$</span> eBlue]</code></pre></div>
<!--
##

That's still not quite what we want for the collisions ...
-->
</section><section id="section-30" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">mergeWith ::</span> (a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> a) <span class="ot">-&gt;</span> [<span class="dt">Event</span> t a] <span class="ot">-&gt;</span> <span class="dt">Event</span> t a</code></pre></div>
</section><section id="section-31" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eMerge ::</span> <span class="dt">Event</span> t <span class="dt">Text</span>
eMerge <span class="fu">=</span> mergeWith (<span class="fu">&lt;&gt;</span>) [eFizz, eBuzz]</code></pre></div>
<div id="examples-events-mergeWith">

</div>
</section><section id="section-32" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> <span class="dt">Semigroup</span> a <span class="ot">=&gt;</span> <span class="dt">Semigroup</span> (<span class="dt">Event</span> t a) <span class="kw">where</span> <span class="fu">...</span></code></pre></div>
</section><section id="section-33" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eMerge ::</span> <span class="dt">Event</span> t <span class="dt">Text</span>
eMerge <span class="fu">=</span> eFizz <span class="fu">&lt;&gt;</span> eBuzz</code></pre></div>
<div id="examples-events-merge">

</div>
<!--
##

We still need to print the numbers if we don't have a Fizz or a Buzz...
-->
</section><section id="section-34" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">eFizzBuzz ::</span> <span class="dt">Event</span> t <span class="dt">Text</span>
eFizzBuzz <span class="fu">=</span> leftmost [eFizz <span class="fu">&lt;&gt;</span> eBuzz, eCount]</code></pre></div>
<div id="examples-events-fizzbuzz">

</div>
</section></section>
<section><section id="behavior" class="titleslide slide level1"><h1><code>Behavior</code></h1></section><section id="section-35" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Behavior</span> t a



 </code></pre></div>
</section><section id="section-36" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Behavior</span> t a

  <span class="fu">~</span>

t <span class="ot">-&gt;</span> a</code></pre></div>
</section><section id="section-37" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">hold ::</span> <span class="dt">MonadHold</span> t m
     <span class="ot">=&gt;</span> a
     <span class="ot">-&gt;</span> <span class="dt">Event</span> t a
     <span class="ot">-&gt;</span> m (<span class="dt">Behavior</span> t a)</code></pre></div>
</section><section id="section-38" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">tag ::</span> <span class="dt">Reflex</span> t 
    <span class="ot">=&gt;</span> <span class="dt">Behavior</span> t a
    <span class="ot">-&gt;</span> <span class="dt">Event</span> t b
    <span class="ot">-&gt;</span> <span class="dt">Event</span> t a</code></pre></div>
</section><section id="section-39" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue                <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold
  </code></pre></div>
</section><section id="section-40" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue                <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span>
  </code></pre></div>
</section><section id="section-41" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput         <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span>
 </code></pre></div>
</section><section id="section-42" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput         <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
 </code></pre></div>
</section><section id="section-43" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput         <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
         tag </code></pre></div>
</section><section id="section-44" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput         <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
         tag bColour</code></pre></div>
</section><section id="section-45" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
         tag bColour</code></pre></div>
</section><section id="section-46" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
         tag bColour eSample</code></pre></div>
</section><section id="section-47" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
  pure <span class="fu">$</span> tag bColour eSample</code></pre></div>
</section><section id="section-48" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
  pure <span class="fu">$</span> tag bColour eSample</code></pre></div>
<div id="examples-behaviors-sampleBlue1">

</div>
<!--
##

The state doesn't change until the frame _after_ the firing of the `Event`s in `hold`.

##

We can see that by sampling from the `Behavior` when any of the buttons are pressed
-->
</section><section id="section-49" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput

  pure <span class="fu">$</span> tag bColour eSample</code></pre></div>
</section><section id="section-50" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
  <span class="kw">let</span> eAny <span class="fu">=</span> leftmost [                     ]
  pure <span class="fu">$</span> tag bColour eSample</code></pre></div>
</section><section id="section-51" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
  <span class="kw">let</span> eAny <span class="fu">=</span> leftmost [              eSample]
  pure <span class="fu">$</span> tag bColour eSample</code></pre></div>
</section><section id="section-52" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
  <span class="kw">let</span> eAny <span class="fu">=</span> leftmost [      eInput, eSample]
  pure <span class="fu">$</span> tag bColour eSample</code></pre></div>
</section><section id="section-53" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
  <span class="kw">let</span> eAny <span class="fu">=</span> leftmost [() <span class="fu">&lt;$</span> eInput, eSample]
  pure <span class="fu">$</span> tag bColour eSample</code></pre></div>
</section><section id="section-54" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
  <span class="kw">let</span> eAny <span class="fu">=</span> leftmost [() <span class="fu">&lt;$</span> eInput, eSample]
  pure <span class="fu">$</span> tag bColour eAny</code></pre></div>
</section><section id="section-55" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
  <span class="kw">let</span> eAny <span class="fu">=</span> leftmost [() <span class="fu">&lt;$</span> eInput, eSample]
  pure <span class="fu">$</span> tag bColour eAny</code></pre></div>
<div id="examples-behaviors-sampleBlue2">

</div>
</section><section id="section-56" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">attach          ::</span> <span class="dt">Reflex</span> t 
                <span class="ot">=&gt;</span> 
                   <span class="dt">Behavior</span> t a 
                <span class="ot">-&gt;</span> <span class="dt">Event</span> t b 
                <span class="ot">-&gt;</span> <span class="dt">Event</span> t (a, b)</code></pre></div>
</section><section id="section-57" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">attachWith      ::</span> <span class="dt">Reflex</span> t 
                <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> c) 
                <span class="ot">-&gt;</span> <span class="dt">Behavior</span> t a
                <span class="ot">-&gt;</span> <span class="dt">Event</span> t b
                <span class="ot">-&gt;</span> <span class="dt">Event</span> t c</code></pre></div>
</section><section id="section-58" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">attachWithMaybe ::</span> <span class="dt">Reflex</span> t
                <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> <span class="dt">Maybe</span> c) 
                <span class="ot">-&gt;</span> <span class="dt">Behavior</span> t a
                <span class="ot">-&gt;</span> <span class="dt">Event</span> t b
                <span class="ot">-&gt;</span> <span class="dt">Event</span> t c</code></pre></div>
</section><section id="section-59" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">gate            ::</span> <span class="dt">Reflex</span> t 
                <span class="ot">=&gt;</span> 
                   <span class="dt">Behavior</span> t <span class="dt">Bool</span>
                <span class="ot">-&gt;</span> <span class="dt">Event</span> t a
                <span class="ot">-&gt;</span> <span class="dt">Event</span> t a</code></pre></div>
</section><section id="section-60" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> <span class="dt">Functor</span> (<span class="dt">Behavior</span> t) <span class="kw">where</span> <span class="fu">..</span></code></pre></div>
</section><section id="section-61" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue     eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput

  pure <span class="fu">$</span> tag        bColour eSample</code></pre></div>
</section><section id="section-62" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleFlipBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput

  pure <span class="fu">$</span> tag        bColour eSample</code></pre></div>
</section><section id="section-63" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleFlipBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
  <span class="kw">let</span> bFlippedColour <span class="fu">=</span> flipColour <span class="fu">&lt;$&gt;</span> bColour
  pure <span class="fu">$</span> tag        bColour eSample</code></pre></div>
</section><section id="section-64" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleFlipBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
  <span class="kw">let</span> bFlippedColour <span class="fu">=</span> flipColour <span class="fu">&lt;$&gt;</span> bColour
  pure <span class="fu">$</span> tag bFlippedColour eSample</code></pre></div>
</section><section id="section-65" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleFlipBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput
  <span class="kw">let</span> bFlippedColour <span class="fu">=</span> flipColour <span class="fu">&lt;$&gt;</span> bColour
  pure <span class="fu">$</span> tag bFlippedColour eSample</code></pre></div>
<div id="examples-behaviors-sampleFlipBlue">

</div>
</section><section id="section-66" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">b <span class="ot">&lt;-</span> hold (f initial) (f <span class="fu">&lt;$&gt;</span> eChange)
pure b</code></pre></div>
<p>~</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">b <span class="ot">&lt;-</span> hold initial eChange
pure <span class="fu">$</span> f <span class="fu">&lt;$&gt;</span> b</code></pre></div>
</section><section id="section-67" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> <span class="dt">Applicative</span> (<span class="dt">Behavior</span> t) <span class="kw">where</span> <span class="fu">..</span></code></pre></div>
</section><section id="section-68" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue       eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold    <span class="dt">Blue</span> eInput
  pure <span class="fu">$</span> tag bColour     eSample</code></pre></div>
</section><section id="section-69" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleAlwaysBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour <span class="ot">&lt;-</span> hold    <span class="dt">Blue</span> eInput
  pure <span class="fu">$</span> tag bColour     eSample</code></pre></div>
</section><section id="section-70" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleAlwaysBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>
  <span class="kw">let</span> bColour <span class="fu">=</span> pure <span class="dt">Blue</span>
  pure <span class="fu">$</span> tag bColour     eSample</code></pre></div>
</section><section id="section-71" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleAlwaysBlue eInput eSample <span class="fu">=</span> <span class="kw">do</span>

  pure <span class="fu">$</span> tag (pure <span class="dt">Blue</span>) eSample</code></pre></div>
</section><section id="section-72" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleAlwaysBlue eInput eSample <span class="fu">=</span>

         tag (pure <span class="dt">Blue</span>) eSample</code></pre></div>
</section><section id="section-73" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleAlwaysBlue eInput eSample <span class="fu">=</span>

         tag (pure <span class="dt">Blue</span>) eSample</code></pre></div>
<div id="examples-behaviors-sampleAlwaysBlue">

</div>
</section><section id="section-74" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">sampleBlue eInput          eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour  <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput


  pure <span class="fu">$</span> tag bColour                            eSample</code></pre></div>
</section><section id="section-75" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">samplePair eInput          eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour  <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput


  pure <span class="fu">$</span> tag bColour                            eSample</code></pre></div>
</section><section id="section-76" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">samplePair eInput1         eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour1 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput1


  pure <span class="fu">$</span> tag bColour1                           eSample</code></pre></div>
</section><section id="section-77" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">samplePair eInput1 eInput2 eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour1 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput1


  pure <span class="fu">$</span> tag bColour1                           eSample</code></pre></div>
</section><section id="section-78" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">samplePair eInput1 eInput2 eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour1 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput1
  bColour2 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput2

  pure <span class="fu">$</span> tag bColour1                           eSample</code></pre></div>
</section><section id="section-79" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">samplePair eInput1 eInput2 eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour1 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput1
  bColour2 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput2
  <span class="kw">let</span> bPair <span class="fu">=</span> (,) <span class="fu">&lt;$&gt;</span> bColour1 <span class="fu">&lt;*&gt;</span> bColour2
  pure <span class="fu">$</span> tag bColour1                           eSample</code></pre></div>
</section><section id="section-80" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">samplePair eInput1 eInput2 eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour1 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput1
  bColour2 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput2
  <span class="kw">let</span> bPair <span class="fu">=</span> (,) <span class="fu">&lt;$&gt;</span> bColour1 <span class="fu">&lt;*&gt;</span> bColour2
  pure <span class="fu">$</span> tag bPair                              eSample</code></pre></div>
</section><section id="section-81" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">samplePair eInput1 eInput2 eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour1 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput1
  bColour2 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput2

  pure <span class="fu">$</span> tag ((,) <span class="fu">&lt;$&gt;</span> bColour1 <span class="fu">&lt;*&gt;</span> bColour2)    eSample</code></pre></div>
</section><section id="section-82" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">samplePair eInput1 eInput2 eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour1 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput1
  bColour2 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput2

  pure <span class="fu">$</span>      (,) <span class="fu">&lt;$&gt;</span> bColour1 <span class="fu">&lt;*&gt;</span> bColour2  <span class="fu">&lt;@</span> eSample</code></pre></div>
</section><section id="section-83" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">samplePair eInput1 eInput2 eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour1 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput1
  bColour2 <span class="ot">&lt;-</span> hold <span class="dt">Blue</span> eInput2

  pure <span class="fu">$</span>      (,) <span class="fu">&lt;$&gt;</span> bColour1 <span class="fu">&lt;*&gt;</span> bColour2  <span class="fu">&lt;@</span> eSample</code></pre></div>
<div id="examples-behaviors-samplePair">

</div>
</section><section id="section-84" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> <span class="dt">Reflex</span> t <span class="ot">=&gt;</span> 
         <span class="dt">Monad</span> (<span class="dt">Behavior</span> t) <span class="kw">where</span> <span class="fu">..</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> (<span class="dt">Reflex</span> t, <span class="dt">Monoid</span> a) <span class="ot">=&gt;</span> 
         <span class="dt">Monoid</span> (<span class="dt">Behavior</span> t a) <span class="kw">where</span> <span class="fu">..</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> (<span class="dt">Reflex</span> t, <span class="dt">Num</span> a) <span class="ot">=&gt;</span> 
         <span class="dt">Num</span> (<span class="dt">Behavior</span> t a) <span class="kw">where</span> <span class="fu">..</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> (<span class="dt">Reflex</span> t, <span class="dt">IsString</span> a) <span class="ot">=&gt;</span> 
         <span class="dt">IsString</span> (<span class="dt">Behavior</span> t a) <span class="kw">where</span> <span class="fu">..</span></code></pre></div>
</section></section>
<section><section id="dynamic" class="titleslide slide level1"><h1><code>Dynamic</code></h1></section><section id="section-85" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Dynamic</span> t a



 </code></pre></div>
</section><section id="section-86" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Dynamic</span> t a

  <span class="fu">~</span> 

(<span class="dt">Event</span> t a, <span class="dt">Behavior</span> t a) </code></pre></div>
</section><section id="section-87" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">updated ::</span> <span class="dt">Reflex</span> t 
        <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t a 
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t a</code></pre></div>
</section><section id="section-88" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">current ::</span> <span class="dt">Reflex</span> t 
        <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t a 
        <span class="ot">-&gt;</span> <span class="dt">Behavior</span> t a</code></pre></div>
<!--
##

It manages state, and lets you know when the state has changed ...

##

... without having to poll the state for changes

##

We use `Dynamic` for the things that we want to change

##

Because `Dynamic`s are values we can pass them down through other components, right to where they need to be

##

We construct `Dynamic`s directly rather than combining `Event`s and `Behavior`s for reasons of correctness and efficiency
-->
</section><section id="section-89" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">hold        ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
            <span class="ot">=&gt;</span> 
               a 
            <span class="ot">-&gt;</span> <span class="dt">Event</span> t a 
            <span class="ot">-&gt;</span> m (<span class="dt">Behavior</span> t a)</code></pre></div>
</section><section id="section-90" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">holdDyn     ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
            <span class="ot">=&gt;</span> 
               a 
            <span class="ot">-&gt;</span> <span class="dt">Event</span> t a 
            <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span>  t a)</code></pre></div>
</section><section id="section-91" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">foldDyn     ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m) 
            <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> b) 
            <span class="ot">-&gt;</span> b 
            <span class="ot">-&gt;</span> <span class="dt">Event</span> t a 
            <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span>  t b)</code></pre></div>
</section><section id="section-92" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">foldDyn<span class="ot"> ($) ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m) 
            <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> b) 
            <span class="ot">-&gt;</span> b 
            <span class="ot">-&gt;</span> <span class="dt">Event</span> t a 
            <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span>  t b)</code></pre></div>
</section><section id="section-93" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">foldDyn<span class="ot"> ($) ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m) 
            <span class="ot">=&gt;</span> 
               c 
            <span class="ot">-&gt;</span> <span class="dt">Event</span> t (c <span class="ot">-&gt;</span> c)
            <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span>  t c)</code></pre></div>
</section><section id="section-94" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m) 
        <span class="ot">=&gt;</span>

           m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter             <span class="fu">=</span>



 </code></pre></div>
</section><section id="section-95" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m) 
        <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()

        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter             <span class="fu">=</span>



 </code></pre></div>
</section><section id="section-96" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m) 
        <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()

        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter eAdd        <span class="fu">=</span>



 </code></pre></div>
</section><section id="section-97" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m) 
        <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()

        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter eAdd        <span class="fu">=</span>
  foldDyn (<span class="fu">$</span>) <span class="dv">0</span>
  
  
   </code></pre></div>
</section><section id="section-98" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m) 
        <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()

        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter eAdd        <span class="fu">=</span>
  foldDyn (<span class="fu">$</span>) <span class="dv">0</span>                 <span class="fu">$</span>
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span> eAdd
  
   </code></pre></div>
</section><section id="section-99" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m) 
        <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter eAdd        <span class="fu">=</span>
  foldDyn (<span class="fu">$</span>) <span class="dv">0</span>                 <span class="fu">$</span>
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span> eAdd
  
   </code></pre></div>
</section><section id="section-100" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m) 
        <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter eAdd eClear <span class="fu">=</span>
  foldDyn (<span class="fu">$</span>) <span class="dv">0</span>                 <span class="fu">$</span>
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span> eAdd
  
   </code></pre></div>
</section><section id="section-101" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m) 
        <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter eAdd eClear <span class="fu">=</span>
  foldDyn (<span class="fu">$</span>) <span class="dv">0</span> <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span> eAdd
  
    ] </code></pre></div>
</section><section id="section-102" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m) 
        <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter eAdd eClear <span class="fu">=</span>
  foldDyn (<span class="fu">$</span>) <span class="dv">0</span> <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span> eAdd
    , const <span class="dv">0</span> <span class="fu">&lt;$</span> eClear
    ]</code></pre></div>
</section><section id="section-103" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m) 
        <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter eAdd eClear <span class="fu">=</span>
  foldDyn (<span class="fu">$</span>) <span class="dv">0</span> <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span> eAdd
    , const <span class="dv">0</span> <span class="fu">&lt;$</span> eClear
    ]</code></pre></div>
<div id="examples-dynamic-counter">

</div>
</section><section id="section-104" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> <span class="dt">Reflex</span> t <span class="ot">=&gt;</span> 
         <span class="dt">Functor</span> (<span class="dt">Dynamic</span> t) <span class="kw">where</span> <span class="fu">...</span>
<span class="kw">instance</span> <span class="dt">Reflex</span> t <span class="ot">=&gt;</span> 
         <span class="dt">Applicative</span> (<span class="dt">Dynamic</span> t) <span class="kw">where</span> <span class="fu">...</span>
<span class="kw">instance</span> <span class="dt">Reflex</span> t <span class="ot">=&gt;</span> 
         <span class="dt">Monad</span> (<span class="dt">Dynamic</span> t) <span class="kw">where</span> <span class="fu">...</span></code></pre></div>
</section><section id="section-105" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">samplePair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
           <span class="ot">=&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
           <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
           <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
           <span class="ot">-&gt;</span> m (<span class="dt">Event</span>    t (<span class="dt">Colour</span>, <span class="dt">Colour</span>))
samplePair eInput1 eInput2 eSample <span class="fu">=</span> <span class="kw">do</span>
  bColour1 <span class="ot">&lt;-</span> hold    <span class="dt">Blue</span> eInput1
  bColour2 <span class="ot">&lt;-</span> hold    <span class="dt">Blue</span> eInput2
  <span class="kw">let</span> bPair <span class="fu">=</span> (,) <span class="fu">&lt;$&gt;</span> bColour1 <span class="fu">&lt;*&gt;</span> bColour2
  pure <span class="fu">$</span> tag bPair eSample</code></pre></div>
</section><section id="section-106" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">samplePair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
           <span class="ot">=&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
           <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>

           <span class="ot">-&gt;</span> m (<span class="dt">Event</span>    t (<span class="dt">Colour</span>, <span class="dt">Colour</span>))
samplePair eInput1 eInput2         <span class="fu">=</span> <span class="kw">do</span>
  bColour1 <span class="ot">&lt;-</span> hold    <span class="dt">Blue</span> eInput1
  bColour2 <span class="ot">&lt;-</span> hold    <span class="dt">Blue</span> eInput2
  <span class="kw">let</span> bPair <span class="fu">=</span> (,) <span class="fu">&lt;$&gt;</span> bColour1 <span class="fu">&lt;*&gt;</span> bColour2
  pure <span class="fu">$</span> tag bPair eSample</code></pre></div>
</section><section id="section-107" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">samplePair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
           <span class="ot">=&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
           <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>

           <span class="ot">-&gt;</span> m (<span class="dt">Event</span>    t (<span class="dt">Colour</span>, <span class="dt">Colour</span>))
samplePair eInput1 eInput2         <span class="fu">=</span> <span class="kw">do</span>
  bColour1 <span class="ot">&lt;-</span> hold    <span class="dt">Blue</span> eInput1
  bColour2 <span class="ot">&lt;-</span> hold    <span class="dt">Blue</span> eInput2
  <span class="kw">let</span> bPair <span class="fu">=</span> (,) <span class="fu">&lt;$&gt;</span> bColour1 <span class="fu">&lt;*&gt;</span> bColour2
 </code></pre></div>
</section><section id="section-108" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">samplePair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
           <span class="ot">=&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
           <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>

           <span class="ot">-&gt;</span> m (<span class="dt">Event</span>    t (<span class="dt">Colour</span>, <span class="dt">Colour</span>))
samplePair eInput1 eInput2         <span class="fu">=</span> <span class="kw">do</span>
  bColour1 <span class="ot">&lt;-</span> hold    <span class="dt">Blue</span> eInput1
  bColour2 <span class="ot">&lt;-</span> hold    <span class="dt">Blue</span> eInput2
  pure <span class="fu">$</span>      (,) <span class="fu">&lt;$&gt;</span> bColour1 <span class="fu">&lt;*&gt;</span> bColour2
 </code></pre></div>
</section><section id="section-109" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">samplePair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
           <span class="ot">=&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
           <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>

           <span class="ot">-&gt;</span> m (<span class="dt">Behavior</span> t (<span class="dt">Colour</span>, <span class="dt">Colour</span>))
samplePair eInput1 eInput2         <span class="fu">=</span> <span class="kw">do</span>
  bColour1 <span class="ot">&lt;-</span> hold    <span class="dt">Blue</span> eInput1
  bColour2 <span class="ot">&lt;-</span> hold    <span class="dt">Blue</span> eInput2
  pure <span class="fu">$</span>      (,) <span class="fu">&lt;$&gt;</span> bColour1 <span class="fu">&lt;*&gt;</span> bColour2
 </code></pre></div>
</section><section id="section-110" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">samplePair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
           <span class="ot">=&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
           <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>

           <span class="ot">-&gt;</span> m (<span class="dt">Behavior</span> t (<span class="dt">Colour</span>, <span class="dt">Colour</span>))
samplePair eInput1 eInput2         <span class="fu">=</span> <span class="kw">do</span>
  dColour1 <span class="ot">&lt;-</span> holdDyn <span class="dt">Blue</span> eInput1
  bColour2 <span class="ot">&lt;-</span> hold    <span class="dt">Blue</span> eInput2
  pure <span class="fu">$</span>      (,) <span class="fu">&lt;$&gt;</span> bColour1 <span class="fu">&lt;*&gt;</span> bColour2
 </code></pre></div>
</section><section id="section-111" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">samplePair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
           <span class="ot">=&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
           <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>

           <span class="ot">-&gt;</span> m (<span class="dt">Behavior</span> t (<span class="dt">Colour</span>, <span class="dt">Colour</span>))
samplePair eInput1 eInput2         <span class="fu">=</span> <span class="kw">do</span>
  dColour1 <span class="ot">&lt;-</span> holdDyn <span class="dt">Blue</span> eInput1
  dColour2 <span class="ot">&lt;-</span> holdDyn <span class="dt">Blue</span> eInput2
  pure <span class="fu">$</span>      (,) <span class="fu">&lt;$&gt;</span> bColour1 <span class="fu">&lt;*&gt;</span> bColour2
 </code></pre></div>
</section><section id="section-112" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">samplePair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
           <span class="ot">=&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
           <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>

           <span class="ot">-&gt;</span> m (<span class="dt">Behavior</span> t (<span class="dt">Colour</span>, <span class="dt">Colour</span>))
samplePair eInput1 eInput2         <span class="fu">=</span> <span class="kw">do</span>
  dColour1 <span class="ot">&lt;-</span> holdDyn <span class="dt">Blue</span> eInput1
  dColour2 <span class="ot">&lt;-</span> holdDyn <span class="dt">Blue</span> eInput2
  pure <span class="fu">$</span>      (,) <span class="fu">&lt;$&gt;</span> dColour1 <span class="fu">&lt;*&gt;</span> dColour2
 </code></pre></div>
</section><section id="section-113" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">samplePair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
           <span class="ot">=&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
           <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>

           <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span>  t (<span class="dt">Colour</span>, <span class="dt">Colour</span>))
samplePair eInput1 eInput2         <span class="fu">=</span> <span class="kw">do</span>
  dColour1 <span class="ot">&lt;-</span> holdDyn <span class="dt">Blue</span> eInput1
  dColour2 <span class="ot">&lt;-</span> holdDyn <span class="dt">Blue</span> eInput2
  pure <span class="fu">$</span>      (,) <span class="fu">&lt;$&gt;</span> dColour1 <span class="fu">&lt;*&gt;</span> dColour2
 </code></pre></div>
</section><section id="section-114" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">splitPair ::</span> <span class="dt">Reflex</span> t 
          <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t (<span class="dt">Colour</span>, <span class="dt">Colour</span>)
          <span class="ot">-&gt;</span> (<span class="dt">Dynamic</span> t <span class="dt">Colour</span>, <span class="dt">Dynamic</span> t <span class="dt">Colour</span>)
splitPair dPair <span class="fu">=</span>
  <span class="kw">let</span>
    p1 <span class="fu">=</span> fmap fst dPair
    p2 <span class="fu">=</span> fmap snd dPair
  <span class="kw">in</span>
    (p1, p2)</code></pre></div>
</section><section id="section-115" class="slide level2">
<h2></h2>
<!--There are also tools available for deconstructing them:

##

It can be helpful to use this while pulling things apart:-->
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">holdUniqDyn ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m, <span class="dt">Eq</span> a) 
            <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t a 
            <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t a)</code></pre></div>
<!--
. . .

It removes `Event` firings when the value hasn't changed.
-->
</section><section id="section-116" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">splitPair ::</span>  <span class="dt">Reflex</span> t 
          <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t (<span class="dt">Colour</span>, <span class="dt">Colour</span>)
          <span class="ot">-&gt;</span>   (<span class="dt">Dynamic</span> t <span class="dt">Colour</span>, <span class="dt">Dynamic</span> t <span class="dt">Colour</span>)
splitPair dPair <span class="fu">=</span>
  <span class="kw">let</span>
    p1 <span class="fu">=</span>               fmap fst dPair
    p2 <span class="fu">=</span>               fmap snd dPair
  <span class="kw">in</span>     (p1, p2)</code></pre></div>
</section><section id="section-117" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">splitPair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m)
          <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t (<span class="dt">Colour</span>, <span class="dt">Colour</span>)
          <span class="ot">-&gt;</span>   (<span class="dt">Dynamic</span> t <span class="dt">Colour</span>, <span class="dt">Dynamic</span> t <span class="dt">Colour</span>)
splitPair dPair <span class="fu">=</span>
  <span class="kw">let</span>
    p1 <span class="fu">=</span>               fmap fst dPair
    p2 <span class="fu">=</span>               fmap snd dPair
  <span class="kw">in</span>     (p1, p2)</code></pre></div>
</section><section id="section-118" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">splitPair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m)
          <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t (<span class="dt">Colour</span>, <span class="dt">Colour</span>)
          <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Colour</span>, <span class="dt">Dynamic</span> t <span class="dt">Colour</span>)
splitPair dPair <span class="fu">=</span>
  <span class="kw">let</span>
    p1 <span class="fu">=</span>               fmap fst dPair
    p2 <span class="fu">=</span>               fmap snd dPair
  <span class="kw">in</span>     (p1, p2)</code></pre></div>
</section><section id="section-119" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">splitPair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m)
          <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t (<span class="dt">Colour</span>, <span class="dt">Colour</span>)
          <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Colour</span>, <span class="dt">Dynamic</span> t <span class="dt">Colour</span>)
splitPair dPair <span class="fu">=</span>
  <span class="kw">do</span>
    p1 <span class="fu">=</span>               fmap fst dPair
    p2 <span class="fu">=</span>               fmap snd dPair
  <span class="kw">in</span>     (p1, p2)</code></pre></div>
</section><section id="section-120" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">splitPair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m)
          <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t (<span class="dt">Colour</span>, <span class="dt">Colour</span>)
          <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Colour</span>, <span class="dt">Dynamic</span> t <span class="dt">Colour</span>)
splitPair dPair <span class="fu">=</span>
  <span class="kw">do</span>
    p1 <span class="ot">&lt;-</span> holdUniqDyn (fmap fst dPair)
    p2 <span class="fu">=</span>               fmap snd dPair
  <span class="kw">in</span>     (p1, p2)</code></pre></div>
</section><section id="section-121" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">splitPair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m)
          <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t (<span class="dt">Colour</span>, <span class="dt">Colour</span>)
          <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Colour</span>, <span class="dt">Dynamic</span> t <span class="dt">Colour</span>)
splitPair dPair <span class="fu">=</span>
  <span class="kw">do</span>
    p1 <span class="ot">&lt;-</span> holdUniqDyn (fmap fst dPair)
    p2 <span class="ot">&lt;-</span> holdUniqDyn (fmap snd dPair)
  <span class="kw">in</span>     (p1, p2)</code></pre></div>
</section><section id="section-122" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">splitPair ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m, <span class="dt">MonadFix</span> m)
          <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t (<span class="dt">Colour</span>, <span class="dt">Colour</span>)
          <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Colour</span>, <span class="dt">Dynamic</span> t <span class="dt">Colour</span>)
splitPair dPair <span class="fu">=</span>
  <span class="kw">do</span>
    p1 <span class="ot">&lt;-</span> holdUniqDyn (fmap fst dPair)
    p2 <span class="ot">&lt;-</span> holdUniqDyn (fmap snd dPair)
    pure (p1, p2)</code></pre></div>
</section></section>
<section><section id="recursivedo" class="titleslide slide level1"><h1><code>RecursiveDo</code></h1></section><section id="section-123" class="slide level2">
<h2></h2>
<!--

`Behavior`s are specified at all points of time

 This is also true of `Dynamic`s

`Event`s are only specified at some unique points of time

So all `Behavior`s have a value before any of the `Event`s fire

It is perfectly valid to have `Event`s that build a `Behavior` and also depend on the `Behavior`

This is where the one frame delay comes in - we are using the old value of the `Behavior` to build the new value of the `Behavior`

This means some dependencies can be loops, which is fine

We just need a way to specify them
-->
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">
<span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadFix</span> m, <span class="dt">MonadHold</span> t m) 
        <span class="ot">=&gt;</span> 
           <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter        eAdd eClear <span class="fu">=</span>  <span class="kw">do</span>


  dCount <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) <span class="dv">0</span> <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span>                         eAdd
    , const <span class="dv">0</span> <span class="fu">&lt;$</span>                         eClear
    ]
    
  pure dCount</code></pre></div>
</section><section id="section-124" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">
<span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadFix</span> m, <span class="dt">MonadHold</span> t m) 
        <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Int</span>
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter        eAdd eClear <span class="fu">=</span>  <span class="kw">do</span>


  dCount <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) <span class="dv">0</span> <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span>                         eAdd
    , const <span class="dv">0</span> <span class="fu">&lt;$</span>                         eClear
    ]
    
  pure dCount</code></pre></div>
</section><section id="section-125" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">
<span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadFix</span> m, <span class="dt">MonadHold</span> t m) 
        <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Int</span>
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter dLimit eAdd eClear <span class="fu">=</span>  <span class="kw">do</span>


  dCount <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) <span class="dv">0</span> <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span>                         eAdd
    , const <span class="dv">0</span> <span class="fu">&lt;$</span>                         eClear
    ]
    
  pure dCount</code></pre></div>
</section><section id="section-126" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">
<span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadFix</span> m, <span class="dt">MonadHold</span> t m) 
        <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Int</span>
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter dLimit eAdd eClear <span class="fu">=</span>  <span class="kw">do</span>


  dCount <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) <span class="dv">0</span> <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span> gate _                  eAdd
    , const <span class="dv">0</span> <span class="fu">&lt;$</span>                         eClear
    ]
    
  pure dCount</code></pre></div>
</section><section id="section-127" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">
<span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadFix</span> m, <span class="dt">MonadHold</span> t m) 
        <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Int</span>
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter dLimit eAdd eClear <span class="fu">=</span>  <span class="kw">do</span>
  <span class="kw">let</span> dLimitOK <span class="fu">=</span> (<span class="fu">&lt;</span>) <span class="fu">&lt;$&gt;</span> dCount <span class="fu">&lt;*&gt;</span> dLimit

  dCount <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) <span class="dv">0</span> <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span> gate _                  eAdd
    , const <span class="dv">0</span> <span class="fu">&lt;$</span>                         eClear
    ]
    
  pure dCount</code></pre></div>
</section><section id="section-128" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">
<span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadFix</span> m, <span class="dt">MonadHold</span> t m) 
        <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Int</span>
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter dLimit eAdd eClear <span class="fu">=</span>  <span class="kw">do</span>
  <span class="kw">let</span> dLimitOK <span class="fu">=</span> (<span class="fu">&lt;</span>) <span class="fu">&lt;$&gt;</span> dCount <span class="fu">&lt;*&gt;</span> dLimit

  dCount <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) <span class="dv">0</span> <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span> gate (current dLimitOK) eAdd
    , const <span class="dv">0</span> <span class="fu">&lt;$</span>                         eClear
    ]
    
  pure dCount</code></pre></div>
</section><section id="section-129" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">{-# LANGUAGE RecursiveDo #-}</span>
<span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadFix</span> m, <span class="dt">MonadHold</span> t m) 
        <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Int</span>
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter dLimit eAdd eClear <span class="fu">=</span>  <span class="kw">do</span>
  <span class="kw">let</span> dLimitOK <span class="fu">=</span> (<span class="fu">&lt;</span>) <span class="fu">&lt;$&gt;</span> dCount <span class="fu">&lt;*&gt;</span> dLimit

  dCount <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) <span class="dv">0</span> <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span> gate (current dLimitOK) eAdd
    , const <span class="dv">0</span> <span class="fu">&lt;$</span>                         eClear
    ]
    
  pure dCount</code></pre></div>
</section><section id="section-130" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">{-# LANGUAGE RecursiveDo #-}</span>
<span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadFix</span> m, <span class="dt">MonadHold</span> t m) 
        <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Int</span> 
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t () 
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter dLimit eAdd eClear <span class="fu">=</span> mdo
  <span class="kw">let</span> dLimitOK <span class="fu">=</span> (<span class="fu">&lt;</span>) <span class="fu">&lt;$&gt;</span> dCount <span class="fu">&lt;*&gt;</span> dLimit

  dCount <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) <span class="dv">0</span> <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span> gate (current dLimitOK) eAdd
    , const <span class="dv">0</span> <span class="fu">&lt;$</span>                         eClear
    ]

  pure dCount</code></pre></div>
</section><section id="section-131" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">{-# LANGUAGE RecursiveDo #-}</span>
<span class="ot">counter ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadFix</span> m, <span class="dt">MonadHold</span> t m) 
        <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Int</span> 
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t () 
        <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
        <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t <span class="dt">Int</span>)
counter dLimit eAdd eClear <span class="fu">=</span> mdo
  <span class="kw">let</span> dLimitOK <span class="fu">=</span> (<span class="fu">&lt;</span>) <span class="fu">&lt;$&gt;</span> dCount <span class="fu">&lt;*&gt;</span> dLimit

  dCount <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) <span class="dv">0</span> <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      (<span class="fu">+</span> <span class="dv">1</span>)   <span class="fu">&lt;$</span> gate (current dLimitOK) eAdd
    , const <span class="dv">0</span> <span class="fu">&lt;$</span>                         eClear
    ]

  pure dCount</code></pre></div>
<div id="examples-recursiveDo-2">

</div>
</section></section>
<section><section id="dombuilder" class="titleslide slide level1"><h1><code>DomBuilder</code></h1></section><section id="section-132" class="slide level2">
<h2></h2>
<!--
We layout DOM elements using a monad that is supplied by `reflex-dom`

## 

We'll be introducing some pieces of TodoMVC as we go

##
-->
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">el ::</span> <span class="dt">DomBuilder</span> t m 
   <span class="ot">=&gt;</span> <span class="dt">Text</span> 
   <span class="ot">-&gt;</span> m a 
   <span class="ot">-&gt;</span> m a</code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">text ::</span> <span class="dt">DomBuilder</span> t m 
     <span class="ot">=&gt;</span> <span class="dt">Text</span> 
     <span class="ot">-&gt;</span> m ()</code></pre></div>
</section><section id="section-133" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">el <span class="st">&quot;div&quot;</span> <span class="fu">$</span>
  text <span class="st">&quot;TODO&quot;</span></code></pre></div>
<div id="examples-dom-todo" class="demo">

</div>
<!--
##

We can use Dynamics to set up the JS to listen for changes and to make them happen, at the elements that need to change

##

Thanks to some internal magic, if you don't use an `Event` from a component then no listeners are set up for that `Event` 

##

The end result is doing the same thing a virtual DOM framework would do, but is eliding the diffs and patches

##

And we have finer grain control of what undergoes rendering changes
-->
</section><section id="section-134" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">button ::</span> <span class="dt">DomBuilder</span> t m 
       <span class="ot">=&gt;</span> <span class="dt">Text</span> 
       <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())</code></pre></div>
</section><section id="section-135" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
         <span class="ot">=&gt;</span> <span class="dt">Text</span> 
         <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())
todoItem placeholder <span class="fu">=</span>
  el <span class="st">&quot;div&quot;</span> <span class="fu">$</span> <span class="kw">do</span>
    el <span class="st">&quot;div&quot;</span> <span class="fu">$</span> 
      text placeholder
    button <span class="st">&quot;Remove&quot;</span></code></pre></div>
<div id="examples-dom-todoitem-1" class="demo">

</div>
</section><section id="section-136" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">dynText ::</span> (<span class="dt">PostBuild</span> t m, <span class="dt">DomBuilder</span> t m) 
        <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Text</span> 
        <span class="ot">-&gt;</span> m ()</code></pre></div>
</section><section id="section-137" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">el <span class="st">&quot;div&quot;</span> <span class="fu">$</span> mdo



  eRemove <span class="ot">&lt;-</span> todoItem <span class="st">&quot;TODO&quot;</span>




  pure ()</code></pre></div>
</section><section id="section-138" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">el <span class="st">&quot;div&quot;</span> <span class="fu">$</span> mdo



  eRemove <span class="ot">&lt;-</span> todoItem <span class="st">&quot;TODO&quot;</span>

  dLabel <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> <span class="fu">$</span> 
    <span class="st">&quot;Removed:&quot;</span> <span class="fu">&lt;$</span> eRemove

  pure ()</code></pre></div>
</section><section id="section-139" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">el <span class="st">&quot;div&quot;</span> <span class="fu">$</span> mdo
  el <span class="st">&quot;div&quot;</span> <span class="fu">$</span> 
    dynText dLabel

  eRemove <span class="ot">&lt;-</span> todoItem <span class="st">&quot;TODO&quot;</span>

  dLabel <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> <span class="fu">$</span> 
    <span class="st">&quot;Removed:&quot;</span> <span class="fu">&lt;$</span> eRemove

  pure ()</code></pre></div>
</section><section id="section-140" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">el <span class="st">&quot;div&quot;</span> <span class="fu">$</span> mdo
  el <span class="st">&quot;div&quot;</span> <span class="fu">$</span> 
    dynText dLabel

  eRemove <span class="ot">&lt;-</span> todoItem <span class="st">&quot;TODO&quot;</span>

  dLabel <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> <span class="fu">$</span> 
    <span class="st">&quot;Removed:&quot;</span> <span class="fu">&lt;$</span> eRemove

  pure ()</code></pre></div>
<div id="examples-dom-todoitem-2" class="demo">

</div>
</section><section id="section-141" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">elAttr    ::</span>  <span class="dt">DomBuilder</span> t m 
          <span class="ot">=&gt;</span> <span class="dt">Text</span> 
          <span class="ot">-&gt;</span>            <span class="dt">Map</span> <span class="dt">Text</span> <span class="dt">Text</span> 
          <span class="ot">-&gt;</span> m a 
          <span class="ot">-&gt;</span> m a</code></pre></div>
</section><section id="section-142" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">elDynAttr ::</span> (<span class="dt">DomBuilder</span> t m, <span class="dt">PostBuild</span> t m) 
          <span class="ot">=&gt;</span> <span class="dt">Text</span> 
          <span class="ot">-&gt;</span> <span class="dt">Dynamic</span> t (<span class="dt">Map</span> <span class="dt">Text</span> <span class="dt">Text</span>) 
          <span class="ot">-&gt;</span> m a 
          <span class="ot">-&gt;</span> m a</code></pre></div>
</section><section id="section-143" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">elClass    ::</span>  <span class="dt">DomBuilder</span> t m 
           <span class="ot">=&gt;</span> <span class="dt">Text</span> 
           <span class="ot">-&gt;</span>           <span class="dt">Text</span> 
           <span class="ot">-&gt;</span> m a 
           <span class="ot">-&gt;</span> m a</code></pre></div>
</section><section id="section-144" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">elDynClass ::</span> (<span class="dt">DomBuilder</span> t m, <span class="dt">PostBuild</span> t m) 
           <span class="ot">=&gt;</span> <span class="dt">Text</span> 
           <span class="ot">-&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Text</span> 
           <span class="ot">-&gt;</span> m a 
           <span class="ot">-&gt;</span> m a</code></pre></div>
</section><section id="section-145" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
         <span class="ot">=&gt;</span> <span class="dt">Text</span> 
         <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())
todoItem placeholder <span class="fu">=</span>
  el      <span class="st">&quot;div&quot;</span>             <span class="fu">$</span>  <span class="kw">do</span>

    el         <span class="st">&quot;div&quot;</span>              <span class="fu">$</span>
      text placeholder

    eRemove <span class="ot">&lt;-</span> button <span class="st">&quot;Remove&quot;</span>




    pure eRemove</code></pre></div>
</section><section id="section-146" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
         <span class="ot">=&gt;</span> <span class="dt">Text</span> 
         <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())
todoItem placeholder <span class="fu">=</span>
  elClass <span class="st">&quot;div&quot;</span>             <span class="fu">$</span>  <span class="kw">do</span>

    el         <span class="st">&quot;div&quot;</span>              <span class="fu">$</span>
      text placeholder

    eRemove <span class="ot">&lt;-</span> button <span class="st">&quot;Remove&quot;</span>




    pure eRemove</code></pre></div>
</section><section id="section-147" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
         <span class="ot">=&gt;</span> <span class="dt">Text</span> 
         <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())
todoItem placeholder <span class="fu">=</span>
  elClass <span class="st">&quot;div&quot;</span> <span class="st">&quot;todo-item&quot;</span> <span class="fu">$</span>  <span class="kw">do</span>

    el         <span class="st">&quot;div&quot;</span>              <span class="fu">$</span>
      text placeholder

    eRemove <span class="ot">&lt;-</span> button <span class="st">&quot;Remove&quot;</span>




    pure eRemove</code></pre></div>
</section><section id="section-148" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
         <span class="ot">=&gt;</span> <span class="dt">Text</span> 
         <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())
todoItem placeholder <span class="fu">=</span>
  elClass <span class="st">&quot;div&quot;</span> <span class="st">&quot;todo-item&quot;</span> <span class="fu">$</span>  <span class="kw">do</span>

    el         <span class="st">&quot;div&quot;</span>              <span class="fu">$</span>
      text placeholder

    eRemove <span class="ot">&lt;-</span> button <span class="st">&quot;Remove&quot;</span>

    dRemoveClass <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> <span class="fu">$</span>
      <span class="st">&quot;removed&quot;</span> <span class="fu">&lt;$</span> eRemove

    pure eRemove</code></pre></div>
</section><section id="section-149" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
         <span class="ot">=&gt;</span> <span class="dt">Text</span> 
         <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())
todoItem placeholder <span class="fu">=</span>
  elClass <span class="st">&quot;div&quot;</span> <span class="st">&quot;todo-item&quot;</span> <span class="fu">$</span> mdo

    el         <span class="st">&quot;div&quot;</span>              <span class="fu">$</span>
      text placeholder

    eRemove <span class="ot">&lt;-</span> button <span class="st">&quot;Remove&quot;</span>

    dRemoveClass <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> <span class="fu">$</span>
      <span class="st">&quot;removed&quot;</span> <span class="fu">&lt;$</span> eRemove

    pure eRemove</code></pre></div>
</section><section id="section-150" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
         <span class="ot">=&gt;</span> <span class="dt">Text</span> 
         <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())
todoItem placeholder <span class="fu">=</span>
  elClass <span class="st">&quot;div&quot;</span> <span class="st">&quot;todo-item&quot;</span> <span class="fu">$</span> mdo

    elDynClass <span class="st">&quot;div&quot;</span> dRemoveClass <span class="fu">$</span>
      text placeholder

    eRemove <span class="ot">&lt;-</span> button <span class="st">&quot;Remove&quot;</span>

    dRemoveClass <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> <span class="fu">$</span>
      <span class="st">&quot;removed&quot;</span> <span class="fu">&lt;$</span> eRemove

    pure eRemove</code></pre></div>
</section><section id="section-151" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
         <span class="ot">=&gt;</span> <span class="dt">Text</span> 
         <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())
todoItem placeholder <span class="fu">=</span>
  elClass <span class="st">&quot;div&quot;</span> <span class="st">&quot;todo-item&quot;</span> <span class="fu">$</span> mdo

    elDynClass <span class="st">&quot;div&quot;</span> dRemoveClass <span class="fu">$</span>
      text placeholder

    eRemove <span class="ot">&lt;-</span> button <span class="st">&quot;Remove&quot;</span>

    dRemoveClass <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> <span class="fu">$</span>
      <span class="st">&quot;removed&quot;</span> <span class="fu">&lt;$</span> eRemove

    pure eRemove</code></pre></div>
<div id="examples-dom-todoitem-3" class="demo">

</div>
</section><section id="section-152" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">CheckboxConfig</span> t <span class="fu">=</span> 
  <span class="dt">CheckboxConfig</span> { 
<span class="ot">      _checkboxConfig_setValue   ::</span> <span class="dt">Event</span>   t <span class="dt">Bool</span>
    ,<span class="ot"> _checkboxConfig_attributes ::</span> <span class="dt">Dynamic</span> t (<span class="dt">Map</span> <span class="dt">Text</span> <span class="dt">Text</span>)
    }</code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> <span class="dt">Reflex</span> t <span class="ot">=&gt;</span> <span class="dt">Default</span> (<span class="dt">CheckboxConfig</span> t) <span class="kw">where</span> <span class="fu">...</span></code></pre></div>
</section><section id="section-153" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">checkbox ::</span> (<span class="fu">...</span>) 
         <span class="ot">=&gt;</span> <span class="dt">Bool</span> 
         <span class="ot">-&gt;</span> <span class="dt">CheckboxConfig</span> t 
         <span class="ot">-&gt;</span> m (<span class="dt">Checkbox</span> t)</code></pre></div>
</section><section id="section-154" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Checkbox</span> t <span class="fu">=</span> 
  <span class="dt">Checkbox</span> { 
<span class="ot">     _checkbox_value  ::</span> <span class="dt">Dynamic</span> t <span class="dt">Bool</span>
   ,<span class="ot"> _checkbox_change ::</span> <span class="dt">Event</span>   t <span class="dt">Bool</span>
   }</code></pre></div>
</section><section id="section-155" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">TodoItemConfig</span> <span class="fu">=</span>
  <span class="dt">TodoItemConfig</span> {
<span class="ot">    _todoItemConfig_dText ::</span> <span class="dt">Dynamic</span> t <span class="dt">Text</span>
  }

makeLenses <span class="ch">&#39;&#39;</span><span class="dt">TodoItemConfig</span>

<span class="kw">data</span> <span class="dt">TodoItem</span> t <span class="fu">=</span>
  <span class="dt">TodoItem</span> {
<span class="ot">    _todoItem_dComplete ::</span> <span class="dt">Dynamic</span> t <span class="dt">Bool</span>
  ,<span class="ot"> _todoItem_eRemove   ::</span> <span class="dt">Event</span>   t ()
  }

makeLenses <span class="ch">&#39;&#39;</span><span class="dt">TodoItem</span></code></pre></div>
</section><section id="section-156" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
         <span class="ot">=&gt;</span> <span class="dt">TodoItemConfig</span> 
         <span class="ot">-&gt;</span> m (<span class="dt">TodoItem</span> t)
todoItem (<span class="dt">TodoItemConfig</span> dText) <span class="fu">=</span>
  elClass <span class="st">&quot;div&quot;</span> <span class="st">&quot;todo-item&quot;</span> <span class="fu">$</span> mdo
  
  
  

    elDynClass <span class="st">&quot;div&quot;</span> dRemoveClass <span class="fu">$</span>
      dynText dText

    eRemove <span class="ot">&lt;-</span> button <span class="st">&quot;Remove&quot;</span>
    dRemoveClass <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> <span class="fu">$</span> 
      <span class="st">&quot;removed&quot;</span> <span class="fu">&lt;$</span> eRemove

    pure <span class="fu">$</span> 
      <span class="dt">TodoItem</span>           eRemove</code></pre></div>
</section><section id="section-157" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
         <span class="ot">=&gt;</span> <span class="dt">TodoItemConfig</span> 
         <span class="ot">-&gt;</span> m (<span class="dt">TodoItem</span> t)
todoItem (<span class="dt">TodoItemConfig</span> dText) <span class="fu">=</span>
  elClass <span class="st">&quot;div&quot;</span> <span class="st">&quot;todo-item&quot;</span> <span class="fu">$</span> mdo
    cb <span class="ot">&lt;-</span> checkbox <span class="dt">False</span> def
  
  

    elDynClass <span class="st">&quot;div&quot;</span> dRemoveClass <span class="fu">$</span>
      dynText dText

    eRemove <span class="ot">&lt;-</span> button <span class="st">&quot;Remove&quot;</span>
    dRemoveClass <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> <span class="fu">$</span> 
      <span class="st">&quot;removed&quot;</span> <span class="fu">&lt;$</span> eRemove

    pure <span class="fu">$</span> 
      <span class="dt">TodoItem</span>           eRemove</code></pre></div>
</section><section id="section-158" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
         <span class="ot">=&gt;</span> <span class="dt">TodoItemConfig</span> 
         <span class="ot">-&gt;</span> m (<span class="dt">TodoItem</span> t)
todoItem (<span class="dt">TodoItemConfig</span> dText) <span class="fu">=</span>
  elClass <span class="st">&quot;div&quot;</span> <span class="st">&quot;todo-item&quot;</span> <span class="fu">$</span> mdo
    cb <span class="ot">&lt;-</span> checkbox <span class="dt">False</span> def
    <span class="kw">let</span>
      dComplete <span class="fu">=</span> cb <span class="fu">^.</span> checkbox_value

    elDynClass <span class="st">&quot;div&quot;</span> dRemoveClass <span class="fu">$</span>
      dynText dText

    eRemove <span class="ot">&lt;-</span> button <span class="st">&quot;Remove&quot;</span>
    dRemoveClass <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> <span class="fu">$</span> 
      <span class="st">&quot;removed&quot;</span> <span class="fu">&lt;$</span> eRemove

    pure <span class="fu">$</span> 
      <span class="dt">TodoItem</span>           eRemove</code></pre></div>
</section><section id="section-159" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
         <span class="ot">=&gt;</span> <span class="dt">TodoItemConfig</span> 
         <span class="ot">-&gt;</span> m (<span class="dt">TodoItem</span> t)
todoItem (<span class="dt">TodoItemConfig</span> dText) <span class="fu">=</span>
  elClass <span class="st">&quot;div&quot;</span> <span class="st">&quot;todo-item&quot;</span> <span class="fu">$</span> mdo
    cb <span class="ot">&lt;-</span> checkbox <span class="dt">False</span> def
    <span class="kw">let</span>
      dComplete <span class="fu">=</span> cb <span class="fu">^.</span> checkbox_value

    elDynClass <span class="st">&quot;div&quot;</span> dRemoveClass <span class="fu">$</span>
      dynText dText

    eRemove <span class="ot">&lt;-</span> button <span class="st">&quot;Remove&quot;</span>
    dRemoveClass <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> <span class="fu">$</span> 
      <span class="st">&quot;removed&quot;</span> <span class="fu">&lt;$</span> eRemove

    pure <span class="fu">$</span> 
      <span class="dt">TodoItem</span> dComplete eRemove</code></pre></div>
</section><section id="section-160" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
         <span class="ot">=&gt;</span> <span class="dt">TodoItemConfig</span> 
         <span class="ot">-&gt;</span> m (<span class="dt">TodoItem</span> t)
todoItem (<span class="dt">TodoItemConfig</span> dText) <span class="fu">=</span>
  elClass <span class="st">&quot;div&quot;</span> <span class="st">&quot;todo-item&quot;</span> <span class="fu">$</span> mdo
    cb <span class="ot">&lt;-</span> checkbox <span class="dt">False</span> def
    <span class="kw">let</span>
      dComplete <span class="fu">=</span> cb <span class="fu">^.</span> checkbox_value

    elDynClass <span class="st">&quot;div&quot;</span> dRemoveClass <span class="fu">$</span>
      dynText dText

    eRemove <span class="ot">&lt;-</span> button <span class="st">&quot;Remove&quot;</span>
    dRemoveClass <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> <span class="fu">$</span> 
      <span class="st">&quot;removed&quot;</span> <span class="fu">&lt;$</span> eRemove

    pure <span class="fu">$</span> 
      <span class="dt">TodoItem</span> dComplete eRemove</code></pre></div>
<div id="examples-dom-todoitem-4" class="demo">

</div>
</section><section id="section-161" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="fu">...</span>
    <span class="kw">let</span>
      dComplete <span class="fu">=</span> cb <span class="fu">^.</span> checkbox_value






    elDynClass <span class="st">&quot;div&quot;</span>                    dRemoveClass  <span class="fu">$</span> 
      dynText dText
  <span class="fu">...</span></code></pre></div>
</section><section id="section-162" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="fu">...</span>
    <span class="kw">let</span>
      dComplete <span class="fu">=</span> cb <span class="fu">^.</span> checkbox_value

      mkCompleteClass <span class="dt">False</span> <span class="fu">=</span> <span class="st">&quot;&quot;</span>
      mkCompleteClass <span class="dt">True</span>  <span class="fu">=</span> <span class="st">&quot;completed &quot;</span>



    elDynClass <span class="st">&quot;div&quot;</span>                    dRemoveClass  <span class="fu">$</span> 
      dynText dText
  <span class="fu">...</span></code></pre></div>
</section><section id="section-163" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="fu">...</span>
    <span class="kw">let</span>
      dComplete <span class="fu">=</span> cb <span class="fu">^.</span> checkbox_value

      mkCompleteClass <span class="dt">False</span> <span class="fu">=</span> <span class="st">&quot;&quot;</span>
      mkCompleteClass <span class="dt">True</span>  <span class="fu">=</span> <span class="st">&quot;completed &quot;</span>

      dCompleteClass <span class="fu">=</span> mkCompleteClass <span class="fu">&lt;$&gt;</span> dComplete

    elDynClass <span class="st">&quot;div&quot;</span>                    dRemoveClass  <span class="fu">$</span> 
      dynText dText
  <span class="fu">...</span></code></pre></div>
</section><section id="section-164" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="fu">...</span>
    <span class="kw">let</span>
      dComplete <span class="fu">=</span> cb <span class="fu">^.</span> checkbox_value

      mkCompleteClass <span class="dt">False</span> <span class="fu">=</span> <span class="st">&quot;&quot;</span>
      mkCompleteClass <span class="dt">True</span>  <span class="fu">=</span> <span class="st">&quot;completed &quot;</span>

      dCompleteClass <span class="fu">=</span> mkCompleteClass <span class="fu">&lt;$&gt;</span> dComplete

    elDynClass <span class="st">&quot;div&quot;</span> (dCompleteClass <span class="fu">&lt;&gt;</span> dRemoveClass) <span class="fu">$</span> 
      dynText dText
  <span class="fu">...</span></code></pre></div>
</section><section id="section-165" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="fu">...</span>
    <span class="kw">let</span>
      dComplete <span class="fu">=</span> cb <span class="fu">^.</span> checkbox_value

      mkCompleteClass <span class="dt">False</span> <span class="fu">=</span> <span class="st">&quot;&quot;</span>
      mkCompleteClass <span class="dt">True</span>  <span class="fu">=</span> <span class="st">&quot;completed &quot;</span>

      dCompleteClass <span class="fu">=</span> mkCompleteClass <span class="fu">&lt;$&gt;</span> dComplete

    elDynClass <span class="st">&quot;div&quot;</span> (dCompleteClass <span class="fu">&lt;&gt;</span> dRemoveClass) <span class="fu">$</span> 
      dynText dText
  <span class="fu">...</span></code></pre></div>
<div id="examples-dom-todoitem-5" class="demo">

</div>
</section><section id="section-166" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">TextInputConfig</span> t <span class="fu">=</span> 
  <span class="dt">TextInputConfig</span> { 
<span class="ot">      _textInputConfig_inputType    ::</span> <span class="dt">Text</span>
    ,<span class="ot"> _textInputConfig_initialValue ::</span> <span class="dt">Text</span>
    ,<span class="ot"> _textInputConfig_setValue     ::</span> <span class="dt">Event</span> t <span class="dt">Text</span>
    ,<span class="ot"> _textInputConfig_attributes   ::</span> 
        <span class="dt">Dynamic</span> t (<span class="dt">Map</span> <span class="dt">Text</span> <span class="dt">Text</span>)
    }</code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> <span class="dt">Reflex</span> t <span class="ot">=&gt;</span> <span class="dt">Default</span> (<span class="dt">TextInputConfig</span> t) <span class="kw">where</span> <span class="fu">...</span></code></pre></div>
</section><section id="section-167" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">textInput ::</span> (<span class="fu">...</span>) 
          <span class="ot">=&gt;</span> <span class="dt">TextInputConfig</span> t 
          <span class="ot">-&gt;</span> m (<span class="dt">TextInput</span> t)</code></pre></div>
</section><section id="section-168" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">TextInput</span> t <span class="fu">=</span> 
  <span class="dt">TextInput</span> { 
<span class="ot">      _textInput_value          ::</span> <span class="dt">Dynamic</span> t <span class="dt">Text</span>
    ,<span class="ot"> _textInput_input          ::</span> <span class="dt">Event</span> t <span class="dt">Text</span>
    ,<span class="ot"> _textInput_keypress       ::</span> <span class="dt">Event</span> t <span class="dt">Word</span>
    ,<span class="ot"> _textInput_keydown        ::</span> <span class="dt">Event</span> t <span class="dt">Word</span>
    ,<span class="ot"> _textInput_keyup          ::</span> <span class="dt">Event</span> t <span class="dt">Word</span>
    ,<span class="ot"> _textInput_hasFocus       ::</span> <span class="dt">Dynamic</span> t <span class="dt">Bool</span>
    ,<span class="ot"> _textInput_builderElement ::</span> 
        <span class="dt">InputElement</span> <span class="dt">EventResult</span> <span class="dt">GhcjsDomSpace</span> t
    }</code></pre></div>
</section><section id="section-169" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">addItem ::</span>
  <span class="dt">MonadWidget</span> t m <span class="ot">=&gt;</span>
  m (<span class="dt">Event</span> t <span class="dt">Text</span>)
addItem <span class="fu">=</span>  <span class="kw">do</span>
  ti <span class="ot">&lt;-</span> textInput <span class="fu">$</span>
    def                                                      









  </code></pre></div>
</section><section id="section-170" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">addItem ::</span>
  <span class="dt">MonadWidget</span> t m <span class="ot">=&gt;</span>
  m (<span class="dt">Event</span> t <span class="dt">Text</span>)
addItem <span class="fu">=</span>  <span class="kw">do</span>
  ti <span class="ot">&lt;-</span> textInput <span class="fu">$</span>
    def <span class="fu">&amp;</span> textInputConfig_attributes <span class="fu">.~</span>
            pure (<span class="st">&quot;placeholder&quot;</span> <span class="fu">=:</span> <span class="st">&quot;What shall we do today?&quot;</span>)








  </code></pre></div>
</section><section id="section-171" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">addItem ::</span>
  <span class="dt">MonadWidget</span> t m <span class="ot">=&gt;</span>
  m (<span class="dt">Event</span> t <span class="dt">Text</span>)
addItem <span class="fu">=</span>  <span class="kw">do</span>
  ti <span class="ot">&lt;-</span> textInput <span class="fu">$</span>
    def <span class="fu">&amp;</span> textInputConfig_attributes <span class="fu">.~</span>
            pure (<span class="st">&quot;placeholder&quot;</span> <span class="fu">=:</span> <span class="st">&quot;What shall we do today?&quot;</span>)



  <span class="kw">let</span>
    bValue <span class="fu">=</span> current <span class="fu">$</span> ti <span class="fu">^.</span> textInput_value



  </code></pre></div>
</section><section id="section-172" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">addItem ::</span>
  <span class="dt">MonadWidget</span> t m <span class="ot">=&gt;</span>
  m (<span class="dt">Event</span> t <span class="dt">Text</span>)
addItem <span class="fu">=</span>  <span class="kw">do</span>
  ti <span class="ot">&lt;-</span> textInput <span class="fu">$</span>
    def <span class="fu">&amp;</span> textInputConfig_attributes <span class="fu">.~</span>
            pure (<span class="st">&quot;placeholder&quot;</span> <span class="fu">=:</span> <span class="st">&quot;What shall we do today?&quot;</span>)



  <span class="kw">let</span>
    bValue <span class="fu">=</span> current <span class="fu">$</span> ti <span class="fu">^.</span> textInput_value
    eAtEnter <span class="fu">=</span> bValue <span class="fu">&lt;@</span> getKey ti <span class="dt">Enter</span>


  </code></pre></div>
</section><section id="section-173" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">addItem ::</span>
  <span class="dt">MonadWidget</span> t m <span class="ot">=&gt;</span>
  m (<span class="dt">Event</span> t <span class="dt">Text</span>)
addItem <span class="fu">=</span>  <span class="kw">do</span>
  ti <span class="ot">&lt;-</span> textInput <span class="fu">$</span>
    def <span class="fu">&amp;</span> textInputConfig_attributes <span class="fu">.~</span>
            pure (<span class="st">&quot;placeholder&quot;</span> <span class="fu">=:</span> <span class="st">&quot;What shall we do today?&quot;</span>)



  <span class="kw">let</span>
    bValue <span class="fu">=</span> current <span class="fu">$</span> ti <span class="fu">^.</span> textInput_value
    eAtEnter <span class="fu">=</span> bValue <span class="fu">&lt;@</span> getKey ti <span class="dt">Enter</span>
    eDone <span class="fu">=</span> ffilter (not <span class="fu">.</span> Text.null) eAtEnter

  </code></pre></div>
</section><section id="section-174" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">addItem ::</span>
  <span class="dt">MonadWidget</span> t m <span class="ot">=&gt;</span>
  m (<span class="dt">Event</span> t <span class="dt">Text</span>)
addItem <span class="fu">=</span>  <span class="kw">do</span>
  ti <span class="ot">&lt;-</span> textInput <span class="fu">$</span>
    def <span class="fu">&amp;</span> textInputConfig_attributes <span class="fu">.~</span>
            pure (<span class="st">&quot;placeholder&quot;</span> <span class="fu">=:</span> <span class="st">&quot;What shall we do today?&quot;</span>)



  <span class="kw">let</span>
    bValue <span class="fu">=</span> current <span class="fu">$</span> ti <span class="fu">^.</span> textInput_value
    eAtEnter <span class="fu">=</span> bValue <span class="fu">&lt;@</span> getKey ti <span class="dt">Enter</span>
    eDone <span class="fu">=</span> ffilter (not <span class="fu">.</span> Text.null) eAtEnter

  pure eDone</code></pre></div>
</section><section id="section-175" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">addItem ::</span>
  <span class="dt">MonadWidget</span> t m <span class="ot">=&gt;</span>
  m (<span class="dt">Event</span> t <span class="dt">Text</span>)
addItem <span class="fu">=</span>  <span class="kw">do</span>
  ti <span class="ot">&lt;-</span> textInput <span class="fu">$</span>
    def <span class="fu">&amp;</span> textInputConfig_attributes <span class="fu">.~</span>
            pure (<span class="st">&quot;placeholder&quot;</span> <span class="fu">=:</span> <span class="st">&quot;What shall we do today?&quot;</span>)
        <span class="fu">&amp;</span> textInputConfig_setValue <span class="fu">.~</span>
            (<span class="st">&quot;&quot;</span> <span class="fu">&lt;$</span> eDone)

  <span class="kw">let</span>
    bValue <span class="fu">=</span> current <span class="fu">$</span> ti <span class="fu">^.</span> textInput_value
    eAtEnter <span class="fu">=</span> bValue <span class="fu">&lt;@</span> getKey ti <span class="dt">Enter</span>
    eDone <span class="fu">=</span> ffilter (not <span class="fu">.</span> Text.null) eAtEnter

  pure eDone</code></pre></div>
</section><section id="section-176" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">addItem ::</span>
  <span class="dt">MonadWidget</span> t m <span class="ot">=&gt;</span>
  m (<span class="dt">Event</span> t <span class="dt">Text</span>)
addItem <span class="fu">=</span> mdo
  ti <span class="ot">&lt;-</span> textInput <span class="fu">$</span>
    def <span class="fu">&amp;</span> textInputConfig_attributes <span class="fu">.~</span>
            pure (<span class="st">&quot;placeholder&quot;</span> <span class="fu">=:</span> <span class="st">&quot;What shall we do today?&quot;</span>)
        <span class="fu">&amp;</span> textInputConfig_setValue <span class="fu">.~</span>
            (<span class="st">&quot;&quot;</span> <span class="fu">&lt;$</span> eDone)

  <span class="kw">let</span>
    bValue <span class="fu">=</span> current <span class="fu">$</span> ti <span class="fu">^.</span> textInput_value
    eAtEnter <span class="fu">=</span> bValue <span class="fu">&lt;@</span> getKey ti <span class="dt">Enter</span>
    eDone <span class="fu">=</span> ffilter (not <span class="fu">.</span> Text.null) eAtEnter

  pure eDone</code></pre></div>
</section><section id="section-177" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">addItem ::</span>
  <span class="dt">MonadWidget</span> t m <span class="ot">=&gt;</span>
  m (<span class="dt">Event</span> t <span class="dt">Text</span>)
addItem <span class="fu">=</span> mdo
  ti <span class="ot">&lt;-</span> textInput <span class="fu">$</span>
    def <span class="fu">&amp;</span> textInputConfig_attributes <span class="fu">.~</span>
            pure (<span class="st">&quot;placeholder&quot;</span> <span class="fu">=:</span> <span class="st">&quot;What shall we do today?&quot;</span>)
        <span class="fu">&amp;</span> textInputConfig_setValue <span class="fu">.~</span>
            (<span class="st">&quot;&quot;</span> <span class="fu">&lt;$</span> eDone)

  <span class="kw">let</span>
    bValue <span class="fu">=</span> current <span class="fu">$</span> ti <span class="fu">^.</span> textInput_value
    eAtEnter <span class="fu">=</span> bValue <span class="fu">&lt;@</span> getKey ti <span class="dt">Enter</span>
    eDone <span class="fu">=</span> ffilter (not <span class="fu">.</span> Text.null) eAtEnter

  pure eDone</code></pre></div>
<div id="examples-dom-todoitem-6" class="demo">

</div>
</section></section>
<section><section id="switching" class="titleslide slide level1"><h1>Switching</h1></section><section id="section-178" class="slide level2">
<h2></h2>
<div id="examples-switch-colour-1" class="demo">

</div>
</section><section id="section-179" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchPromptly ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
               <span class="ot">=&gt;</span> <span class="dt">Event</span> a 
               <span class="ot">-&gt;</span> <span class="dt">Event</span> (<span class="dt">Event</span> a) 
               <span class="ot">-&gt;</span> m (<span class="dt">Event</span> a)</code></pre></div>
</section><section id="section-180" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> 
             

                m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour                          <span class="fu">=</span> <span class="kw">do</span>











  </code></pre></div>
</section><section id="section-181" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             

             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour                          <span class="fu">=</span> <span class="kw">do</span>











  </code></pre></div>
</section><section id="section-182" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             

             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1                 <span class="fu">=</span> <span class="kw">do</span>











  </code></pre></div>
</section><section id="section-183" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()

             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1                 <span class="fu">=</span> <span class="kw">do</span>











  </code></pre></div>
</section><section id="section-184" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()

             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2        <span class="fu">=</span> <span class="kw">do</span>











  </code></pre></div>
</section><section id="section-185" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2        <span class="fu">=</span> <span class="kw">do</span>











  </code></pre></div>
</section><section id="section-186" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>











  </code></pre></div>
</section><section id="section-187" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>

  eOut1 <span class="ot">&lt;-</span> _




  eOut2 <span class="ot">&lt;-</span> _




  pure (eOut1, eOut2)</code></pre></div>
</section><section id="section-188" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>

  eOut1 <span class="ot">&lt;-</span> switchPromptly _




  eOut2 <span class="ot">&lt;-</span> switchPromptly _




  pure (eOut1, eOut2)</code></pre></div>
</section><section id="section-189" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>

  eOut1 <span class="ot">&lt;-</span> switchPromptly eInput _




  eOut2 <span class="ot">&lt;-</span> switchPromptly _




  pure (eOut1, eOut2)</code></pre></div>
</section><section id="section-190" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>

  eOut1 <span class="ot">&lt;-</span> switchPromptly eInput _




  eOut2 <span class="ot">&lt;-</span> switchPromptly never _




  pure (eOut1, eOut2)</code></pre></div>
</section><section id="section-191" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>

  eOut1 <span class="ot">&lt;-</span> switchPromptly eInput <span class="fu">.</span> leftmost <span class="fu">$</span> [


    ]

  eOut2 <span class="ot">&lt;-</span> switchPromptly never <span class="fu">.</span> leftmost <span class="fu">$</span> [


    ]

  pure (eOut1, eOut2)</code></pre></div>
</section><section id="section-192" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>

  eOut1 <span class="ot">&lt;-</span> switchPromptly eInput <span class="fu">.</span> leftmost <span class="fu">$</span> [
      eInput <span class="fu">&lt;$</span> eSwitch1

    ]

  eOut2 <span class="ot">&lt;-</span> switchPromptly never <span class="fu">.</span> leftmost <span class="fu">$</span> [


    ]

  pure (eOut1, eOut2)</code></pre></div>
</section><section id="section-193" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>

  eOut1 <span class="ot">&lt;-</span> switchPromptly eInput <span class="fu">.</span> leftmost <span class="fu">$</span> [
      eInput <span class="fu">&lt;$</span> eSwitch1
    , never  <span class="fu">&lt;$</span> eSwitch2
    ]

  eOut2 <span class="ot">&lt;-</span> switchPromptly never <span class="fu">.</span> leftmost <span class="fu">$</span> [


    ]

  pure (eOut1, eOut2)</code></pre></div>
</section><section id="section-194" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t ()
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span>
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>

  eOut1 <span class="ot">&lt;-</span> switchPromptly eInput <span class="fu">.</span> leftmost <span class="fu">$</span> [
      eInput <span class="fu">&lt;$</span> eSwitch1
    , never  <span class="fu">&lt;$</span> eSwitch2
    ]

  eOut2 <span class="ot">&lt;-</span> switchPromptly never <span class="fu">.</span> leftmost <span class="fu">$</span> [
      never  <span class="fu">&lt;$</span> eSwitch1

    ]

  pure (eOut1, eOut2)</code></pre></div>
</section><section id="section-195" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t () 
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t () 
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span> 
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>

  eOut1 <span class="ot">&lt;-</span> switchPromptly eInput <span class="fu">.</span> leftmost <span class="fu">$</span> [
      eInput <span class="fu">&lt;$</span> eSwitch1
    , never  <span class="fu">&lt;$</span> eSwitch2
    ]

  eOut2 <span class="ot">&lt;-</span> switchPromptly never <span class="fu">.</span> leftmost <span class="fu">$</span> [
      never  <span class="fu">&lt;$</span> eSwitch1
    , eInput <span class="fu">&lt;$</span> eSwitch2
    ]

  pure (eOut1, eOut2)</code></pre></div>
</section><section id="section-196" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchPromptly ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
               <span class="ot">=&gt;</span> <span class="dt">Event</span> a 
               <span class="ot">-&gt;</span> <span class="dt">Event</span>    (<span class="dt">Event</span> a) 
               <span class="ot">-&gt;</span> m (<span class="dt">Event</span> a)</code></pre></div>
</section><section id="section-197" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switch         ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
               <span class="ot">=&gt;</span> <span class="dt">Event</span> a 
               <span class="ot">-&gt;</span> <span class="dt">Event</span>    (<span class="dt">Event</span> a) 
               <span class="ot">-&gt;</span> m (<span class="dt">Event</span> a)</code></pre></div>
</section><section id="section-198" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switch         ::</span>  <span class="dt">Reflex</span> t
               <span class="ot">=&gt;</span> <span class="dt">Event</span> a 
               <span class="ot">-&gt;</span> <span class="dt">Event</span>    (<span class="dt">Event</span> a) 
               <span class="ot">-&gt;</span> m (<span class="dt">Event</span> a)</code></pre></div>
</section><section id="section-199" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switch         ::</span>  <span class="dt">Reflex</span> t
               <span class="ot">=&gt;</span> <span class="dt">Event</span> a 
               <span class="ot">-&gt;</span> <span class="dt">Event</span>    (<span class="dt">Event</span> a) 
               <span class="ot">-&gt;</span>    <span class="dt">Event</span> a</code></pre></div>
</section><section id="section-200" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switch         ::</span>  <span class="dt">Reflex</span> t
               <span class="ot">=&gt;</span> 
                  <span class="dt">Event</span>    (<span class="dt">Event</span> a) 
               <span class="ot">-&gt;</span>    <span class="dt">Event</span> a</code></pre></div>
</section><section id="section-201" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switch         ::</span>  <span class="dt">Reflex</span> t
               <span class="ot">=&gt;</span> 
                  <span class="dt">Behavior</span> (<span class="dt">Event</span> a)
               <span class="ot">-&gt;</span>    <span class="dt">Event</span> a</code></pre></div>
</section><section id="section-202" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t () 
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t () 
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span> 
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>

  eOut1 <span class="ot">&lt;-</span> switchPromptly eInput <span class="fu">.</span> leftmost <span class="fu">$</span> [
      eInput <span class="fu">&lt;$</span> eSwitch1
    , never  <span class="fu">&lt;$</span> eSwitch2
    ]

  eOut2 <span class="ot">&lt;-</span> switchPromptly never <span class="fu">.</span> leftmost <span class="fu">$</span> [
      never  <span class="fu">&lt;$</span> eSwitch1
    , eInput <span class="fu">&lt;$</span> eSwitch2
    ]

  pure (       eOut1,        eOut2)</code></pre></div>
</section><section id="section-203" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t () 
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t () 
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span> 
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>

  bOut1 <span class="ot">&lt;-</span> hold           eInput <span class="fu">.</span> leftmost <span class="fu">$</span> [
      eInput <span class="fu">&lt;$</span> eSwitch1
    , never  <span class="fu">&lt;$</span> eSwitch2
    ]

  eOut2 <span class="ot">&lt;-</span> switchPromptly never <span class="fu">.</span> leftmost <span class="fu">$</span> [
      never  <span class="fu">&lt;$</span> eSwitch1
    , eInput <span class="fu">&lt;$</span> eSwitch2
    ]

  pure (       eOut1,        eOut2)</code></pre></div>
</section><section id="section-204" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t () 
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t () 
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span> 
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>

  bOut1 <span class="ot">&lt;-</span> hold           eInput <span class="fu">.</span> leftmost <span class="fu">$</span> [
      eInput <span class="fu">&lt;$</span> eSwitch1
    , never  <span class="fu">&lt;$</span> eSwitch2
    ]

  bOut2 <span class="ot">&lt;-</span> hold           never <span class="fu">.</span> leftmost <span class="fu">$</span> [
      never  <span class="fu">&lt;$</span> eSwitch1
    , eInput <span class="fu">&lt;$</span> eSwitch2
    ]

  pure (       eOut1,        eOut2)</code></pre></div>
</section><section id="section-205" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">switchColour ::</span> (<span class="dt">Reflex</span> t, <span class="dt">MonadHold</span> t m) 
             <span class="ot">=&gt;</span> <span class="dt">Event</span> t () 
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t () 
             <span class="ot">-&gt;</span> <span class="dt">Event</span> t <span class="dt">Colour</span> 
             <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Colour</span>, <span class="dt">Event</span> t <span class="dt">Colour</span>)
switchColour eSwitch1 eSwitch2 eInput <span class="fu">=</span> <span class="kw">do</span>

  bOut1 <span class="ot">&lt;-</span> hold           eInput <span class="fu">.</span> leftmost <span class="fu">$</span> [
      eInput <span class="fu">&lt;$</span> eSwitch1
    , never  <span class="fu">&lt;$</span> eSwitch2
    ]

  bOut2 <span class="ot">&lt;-</span> hold           never <span class="fu">.</span> leftmost <span class="fu">$</span> [
      never  <span class="fu">&lt;$</span> eSwitch1
    , eInput <span class="fu">&lt;$</span> eSwitch2
    ]

  pure (switch eOut1, switch eOut2)</code></pre></div>
</section><section id="section-206" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">widget1 ::</span> <span class="dt">MonadWidget</span> t m 
   <span class="ot">=&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Text</span>)
widget1 <span class="fu">=</span> <span class="kw">do</span>

  </code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">widget2 ::</span> <span class="dt">MonadWidget</span> t m 
   <span class="ot">=&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Text</span>)
widget2 <span class="fu">=</span> <span class="kw">do</span>

  </code></pre></div>
</section><section id="section-207" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">widget1 ::</span> <span class="dt">MonadWidget</span> t m 
   <span class="ot">=&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Text</span>)
widget1 <span class="fu">=</span> <span class="kw">do</span>
  eClick <span class="ot">&lt;-</span> button <span class="st">&quot;OK&quot;</span>
  pure <span class="fu">$</span> <span class="st">&quot;OK&quot;</span> <span class="fu">&lt;$</span> eClick</code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">widget2 ::</span> <span class="dt">MonadWidget</span> t m 
   <span class="ot">=&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Text</span>)
widget2 <span class="fu">=</span> <span class="kw">do</span>

  </code></pre></div>
</section><section id="section-208" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">widget1 ::</span> <span class="dt">MonadWidget</span> t m 
   <span class="ot">=&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Text</span>)
widget1 <span class="fu">=</span> <span class="kw">do</span>
  eClick <span class="ot">&lt;-</span> button <span class="st">&quot;OK&quot;</span>
  pure <span class="fu">$</span> <span class="st">&quot;OK&quot;</span> <span class="fu">&lt;$</span> eClick</code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">widget2 ::</span> <span class="dt">MonadWidget</span> t m 
   <span class="ot">=&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Text</span>)
widget2 <span class="fu">=</span> <span class="kw">do</span>
  ti <span class="ot">&lt;-</span> textInput def
  pure <span class="fu">$</span> ti <span class="fu">^.</span> textInput_input</code></pre></div>
</section><section id="section-209" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>


















  </code></pre></div>
</section><section id="section-210" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
















  </code></pre></div>
</section><section id="section-211" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    dEven <span class="fu">=</span> fmap even dCount
    dOdd  <span class="fu">=</span> fmap odd  dCount













  </code></pre></div>
</section><section id="section-212" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    dEven <span class="fu">=</span> fmap even dCount
    dOdd  <span class="fu">=</span> fmap odd  dCount

  <span class="kw">let</span>
    mkHidden <span class="dt">False</span> <span class="fu">=</span> <span class="st">&quot;hide&quot;</span>
    mkHidden <span class="dt">True</span>  <span class="fu">=</span> <span class="st">&quot;&quot;</span>









  </code></pre></div>
</section><section id="section-213" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    dEven <span class="fu">=</span> fmap even dCount
    dOdd  <span class="fu">=</span> fmap odd  dCount

  <span class="kw">let</span>
    mkHidden <span class="dt">False</span> <span class="fu">=</span> <span class="st">&quot;hide&quot;</span>
    mkHidden <span class="dt">True</span>  <span class="fu">=</span> <span class="st">&quot;&quot;</span>

  eText1 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dEven) widget1







  </code></pre></div>
</section><section id="section-214" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    dEven <span class="fu">=</span> fmap even dCount
    dOdd  <span class="fu">=</span> fmap odd  dCount

  <span class="kw">let</span>
    mkHidden <span class="dt">False</span> <span class="fu">=</span> <span class="st">&quot;hide&quot;</span>
    mkHidden <span class="dt">True</span>  <span class="fu">=</span> <span class="st">&quot;&quot;</span>

  eText1 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dEven) widget1
  eText2 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dOdd)  widget2






  </code></pre></div>
</section><section id="section-215" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    dEven <span class="fu">=</span> fmap even dCount
    dOdd  <span class="fu">=</span> fmap odd  dCount

  <span class="kw">let</span>
    mkHidden <span class="dt">False</span> <span class="fu">=</span> <span class="st">&quot;hide&quot;</span>
    mkHidden <span class="dt">True</span>  <span class="fu">=</span> <span class="st">&quot;&quot;</span>

  eText1 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dEven) widget1
  eText2 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dOdd)  widget2

  <span class="kw">let</span>
    eText <span class="fu">=</span> leftmost [eText1, eText2]


  
  </code></pre></div>
</section><section id="section-216" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    dEven <span class="fu">=</span> fmap even dCount
    dOdd  <span class="fu">=</span> fmap odd  dCount

  <span class="kw">let</span>
    mkHidden <span class="dt">False</span> <span class="fu">=</span> <span class="st">&quot;hide&quot;</span>
    mkHidden <span class="dt">True</span>  <span class="fu">=</span> <span class="st">&quot;&quot;</span>

  eText1 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dEven) widget1
  eText2 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dOdd)  widget2

  <span class="kw">let</span>
    eText <span class="fu">=</span> leftmost [eText1, eText2]

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText

  </code></pre></div>
</section><section id="section-217" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    dEven <span class="fu">=</span> fmap even dCount
    dOdd  <span class="fu">=</span> fmap odd  dCount

  <span class="kw">let</span>
    mkHidden <span class="dt">False</span> <span class="fu">=</span> <span class="st">&quot;hide&quot;</span>
    mkHidden <span class="dt">True</span>  <span class="fu">=</span> <span class="st">&quot;&quot;</span>

  eText1 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dEven) widget1
  eText2 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dOdd)  widget2

  <span class="kw">let</span>
    eText <span class="fu">=</span> leftmost [eText1, eText2]

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span>
    dynText dText</code></pre></div>
</section><section id="section-218" class="slide level2">
<h2></h2>
<div id="examples-switch-widget-hide" class="demo">

</div>
</section><section id="section-219" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">widgetHold ::</span> (<span class="dt">MonadAdjust</span> t m, <span class="dt">MonadHold</span> t m) 
           <span class="ot">=&gt;</span> m a 
           <span class="ot">-&gt;</span> <span class="dt">Event</span> t (m a) 
           <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t a)</code></pre></div>
</section><section id="section-220" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    dEven <span class="fu">=</span> fmap    even             dCount
    dOdd  <span class="fu">=</span> fmap    odd              dCount

  <span class="kw">let</span>
    mkHidden <span class="dt">False</span> <span class="fu">=</span> <span class="st">&quot;hide&quot;</span>
    mkHidden <span class="dt">True</span>  <span class="fu">=</span> <span class="st">&quot;&quot;</span>

  eText1 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dEven) widget1
  eText2 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dOdd)  widget2


  <span class="kw">let</span>
    eText <span class="fu">=</span> leftmost [eText1, eText2]

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-221" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    dOdd  <span class="fu">=</span> fmap    odd              dCount

  <span class="kw">let</span>
    mkHidden <span class="dt">False</span> <span class="fu">=</span> <span class="st">&quot;hide&quot;</span>
    mkHidden <span class="dt">True</span>  <span class="fu">=</span> <span class="st">&quot;&quot;</span>

  eText1 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dEven) widget1
  eText2 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dOdd)  widget2


  <span class="kw">let</span>
    eText <span class="fu">=</span> leftmost [eText1, eText2]

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-222" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    eOdd  <span class="fu">=</span> ffilter odd  <span class="fu">.</span> updated <span class="fu">$</span> dCount

  <span class="kw">let</span>
    mkHidden <span class="dt">False</span> <span class="fu">=</span> <span class="st">&quot;hide&quot;</span>
    mkHidden <span class="dt">True</span>  <span class="fu">=</span> <span class="st">&quot;&quot;</span>

  eText1 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dEven) widget1
  eText2 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dOdd)  widget2


  <span class="kw">let</span>
    eText <span class="fu">=</span> leftmost [eText1, eText2]

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-223" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    eOdd  <span class="fu">=</span> ffilter odd  <span class="fu">.</span> updated <span class="fu">$</span> dCount





  eText1 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dEven) widget1
  eText2 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dOdd)  widget2


  <span class="kw">let</span>
    eText <span class="fu">=</span> leftmost [eText1, eText2]

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-224" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    eOdd  <span class="fu">=</span> ffilter odd  <span class="fu">.</span> updated <span class="fu">$</span> dCount





      widget1 <span class="fu">&lt;$</span> eEven
  eText2 <span class="ot">&lt;-</span> elDynClass <span class="st">&quot;div&quot;</span> (mkHidden <span class="fu">&lt;$&gt;</span> dOdd)  widget2


  <span class="kw">let</span>
    eText <span class="fu">=</span> leftmost [eText1, eText2]

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-225" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    eOdd  <span class="fu">=</span> ffilter odd  <span class="fu">.</span> updated <span class="fu">$</span> dCount





      widget1 <span class="fu">&lt;$</span> eEven
    , widget2 <span class="fu">&lt;$</span> eOdd


  <span class="kw">let</span>
    eText <span class="fu">=</span> leftmost [eText1, eText2]

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-226" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    eOdd  <span class="fu">=</span> ffilter odd  <span class="fu">.</span> updated <span class="fu">$</span> dCount




                                 leftmost <span class="fu">$</span> [
      widget1 <span class="fu">&lt;$</span> eEven
    , widget2 <span class="fu">&lt;$</span> eOdd
    ]

  <span class="kw">let</span>
    eText <span class="fu">=</span> leftmost [eText1, eText2]

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-227" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    eOdd  <span class="fu">=</span> ffilter odd  <span class="fu">.</span> updated <span class="fu">$</span> dCount




  deText <span class="ot">&lt;-</span> widgetHold widget1 <span class="fu">.</span> leftmost <span class="fu">$</span> [
      widget1 <span class="fu">&lt;$</span> eEven
    , widget2 <span class="fu">&lt;$</span> eOdd
    ]

  <span class="kw">let</span>
    eText <span class="fu">=</span> leftmost [eText1, eText2]

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-228" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    eOdd  <span class="fu">=</span> ffilter odd  <span class="fu">.</span> updated <span class="fu">$</span> dCount




  deText <span class="ot">&lt;-</span> widgetHold widget1 <span class="fu">.</span> leftmost <span class="fu">$</span> [
      widget1 <span class="fu">&lt;$</span> eEven
    , widget2 <span class="fu">&lt;$</span> eOdd
    ]

  <span class="kw">let</span>
    eText <span class="fu">=</span> switch <span class="fu">.</span> current <span class="fu">$</span> deText

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-229" class="slide level2">
<h2></h2>
<div id="examples-switch-widget-hold" class="demo">

</div>
</section><section id="section-230" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">dyn ::</span> (<span class="dt">MonadAdjust</span> t m, <span class="dt">PostBuild</span> t m) 
    <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t (m a) 
    <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t a)</code></pre></div>
</section><section id="section-231" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    eOdd  <span class="fu">=</span> ffilter odd  <span class="fu">.</span> updated <span class="fu">$</span> dCount

  deText  <span class="ot">&lt;-</span> widgetHold widget1 <span class="fu">.</span> leftmost <span class="fu">$</span> [
      widget1 <span class="fu">&lt;$</span> eEven
    , widget2 <span class="fu">&lt;$</span> eOdd
    ]

  <span class="kw">let</span>
    eText <span class="fu">=</span> switch <span class="fu">.</span> current <span class="fu">$</span> deText

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-232" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    eOdd  <span class="fu">=</span> ffilter odd  <span class="fu">.</span> updated <span class="fu">$</span> dCount

  deText  <span class="ot">&lt;-</span> holdDyn widget1    <span class="fu">.</span> leftmost <span class="fu">$</span> [
      widget1 <span class="fu">&lt;$</span> eEven
    , widget2 <span class="fu">&lt;$</span> eOdd
    ]

  <span class="kw">let</span>
    eText <span class="fu">=</span> switch <span class="fu">.</span> current <span class="fu">$</span> deText

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-233" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    eOdd  <span class="fu">=</span> ffilter odd  <span class="fu">.</span> updated <span class="fu">$</span> dCount

  dWidget <span class="ot">&lt;-</span> holdDyn widget1    <span class="fu">.</span> leftmost <span class="fu">$</span> [
      widget1 <span class="fu">&lt;$</span> eEven
    , widget2 <span class="fu">&lt;$</span> eOdd
    ]

  <span class="kw">let</span>
    eText <span class="fu">=</span> switch <span class="fu">.</span> current <span class="fu">$</span> deText

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-234" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    eOdd  <span class="fu">=</span> ffilter odd  <span class="fu">.</span> updated <span class="fu">$</span> dCount

  dWidget <span class="ot">&lt;-</span> holdDyn widget1    <span class="fu">.</span> leftmost <span class="fu">$</span> [
      widget1 <span class="fu">&lt;$</span> eEven
    , widget2 <span class="fu">&lt;$</span> eOdd
    ]




  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-235" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    eOdd  <span class="fu">=</span> ffilter odd  <span class="fu">.</span> updated <span class="fu">$</span> dCount

  dWidget <span class="ot">&lt;-</span> holdDyn widget1 <span class="fu">.</span>    leftmost <span class="fu">$</span> [
      widget1 <span class="fu">&lt;$</span> eEven
    , widget2 <span class="fu">&lt;$</span> eOdd
    ]

  eeText <span class="ot">&lt;-</span> dyn dWidget


  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-236" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  dCount <span class="ot">&lt;-</span> count eSwitch
  <span class="kw">let</span>
    eEven <span class="fu">=</span> ffilter even <span class="fu">.</span> updated <span class="fu">$</span> dCount
    eOdd  <span class="fu">=</span> ffilter odd  <span class="fu">.</span> updated <span class="fu">$</span> dCount

  dWidget <span class="ot">&lt;-</span> holdDyn widget1 <span class="fu">.</span>    leftmost <span class="fu">$</span> [
      widget1 <span class="fu">&lt;$</span> eEven
    , widget2 <span class="fu">&lt;$</span> eOdd
    ]

  eeText <span class="ot">&lt;-</span> dyn dWidget
  eText  <span class="ot">&lt;-</span> switchPromptly never eeText

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-237" class="slide level2">
<h2></h2>
<div id="examples-switch-dyn" class="demo">

</div>
</section><section id="section-238" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">newtype</span> <span class="dt">Workflow</span> t m a <span class="fu">=</span> <span class="dt">Workflow</span> { 
<span class="ot">    unWorkflow ::</span> m (a, <span class="dt">Event</span> t (<span class="dt">Workflow</span> t m a))
  }</code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">workflow ::</span> (<span class="dt">DomBuilder</span> t m, <span class="dt">MonadFix</span> m, <span class="dt">MonadHold</span> t m) 
         <span class="ot">=&gt;</span> <span class="dt">Workflow</span> t m a 
         <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t a)</code></pre></div>
</section><section id="section-239" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>












  deText <span class="ot">&lt;-</span> _

  <span class="kw">let</span> eText <span class="fu">=</span> switch <span class="fu">.</span> current <span class="fu">$</span> deText

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-240" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  <span class="kw">let</span>
<span class="ot">    workflow1 ::</span> <span class="dt">Workflow</span> t m (<span class="dt">Event</span> t <span class="dt">Text</span>)
    worfklow1 <span class="fu">=</span> <span class="dt">Workflow</span> <span class="fu">$</span> <span class="kw">do</span>
      eText1 <span class="ot">&lt;-</span> widget1
      pure (eText1, workflow2 <span class="fu">&lt;$</span> eSwitch)






  deText <span class="ot">&lt;-</span> _

  <span class="kw">let</span> eText <span class="fu">=</span> switch <span class="fu">.</span> current <span class="fu">$</span> deText

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-241" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  <span class="kw">let</span>
<span class="ot">    workflow1 ::</span> <span class="dt">Workflow</span> t m (<span class="dt">Event</span> t <span class="dt">Text</span>)
    worfklow1 <span class="fu">=</span> <span class="dt">Workflow</span> <span class="fu">$</span> <span class="kw">do</span>
      eText1 <span class="ot">&lt;-</span> widget1
      pure (eText1, workflow2 <span class="fu">&lt;$</span> eSwitch)

<span class="ot">    workflow2 ::</span> <span class="dt">Workflow</span> t m (<span class="dt">Event</span> t <span class="dt">Text</span>)
    workflow2 <span class="fu">=</span> <span class="dt">Workflow</span> <span class="fu">$</span> <span class="kw">do</span>
      eText2 <span class="ot">&lt;-</span> widget2
      pure (eText2, workflow1 <span class="fu">&lt;$</span> eSwitch)

  deText <span class="ot">&lt;-</span> _

  <span class="kw">let</span> eText <span class="fu">=</span> switch <span class="fu">.</span> current <span class="fu">$</span> deText

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-242" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  eSwitch <span class="ot">&lt;-</span> button <span class="st">&quot;Switch&quot;</span>

  <span class="kw">let</span>
<span class="ot">    workflow1 ::</span> <span class="dt">Workflow</span> t m (<span class="dt">Event</span> t <span class="dt">Text</span>)
    worfklow1 <span class="fu">=</span> <span class="dt">Workflow</span> <span class="fu">$</span> <span class="kw">do</span>
      eText1 <span class="ot">&lt;-</span> widget1
      pure (eText1, workflow2 <span class="fu">&lt;$</span> eSwitch)

<span class="ot">    workflow2 ::</span> <span class="dt">Workflow</span> t m (<span class="dt">Event</span> t <span class="dt">Text</span>)
    workflow2 <span class="fu">=</span> <span class="dt">Workflow</span> <span class="fu">$</span> <span class="kw">do</span>
      eText2 <span class="ot">&lt;-</span> widget2
      pure (eText2, workflow1 <span class="fu">&lt;$</span> eSwitch)

  deText <span class="ot">&lt;-</span> workflow workflow1

  <span class="kw">let</span> eText <span class="fu">=</span> switch <span class="fu">.</span> current <span class="fu">$</span> deText

  dText <span class="ot">&lt;-</span> holdDyn <span class="st">&quot;&quot;</span> eText
  el <span class="st">&quot;div&quot;</span><span class="fu">$</span> dynText dText</code></pre></div>
</section><section id="section-243" class="slide level2">
<h2></h2>
<div id="examples-switch-workflow-1" class="demo">

</div>
</section></section>
<section><section id="collections" class="titleslide slide level1"><h1>Collections</h1></section><section id="section-244" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">addItemWidget ::</span> <span class="dt">MonadWidget</span> t m 
              <span class="ot">=&gt;</span> m (<span class="dt">Event</span> t <span class="dt">Text</span>)</code></pre></div>
</section><section id="section-245" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="fu">...</span>

  <span class="co">-- eAdd     :: Event t Text</span>
  eAdd <span class="ot">&lt;-</span> addItemWidget








  <span class="fu">...</span></code></pre></div>
</section><section id="section-246" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="fu">...</span>

  <span class="co">-- eAdd     :: Event t Text</span>
  eAdd <span class="ot">&lt;-</span> addItemWidget

  <span class="co">-- dNextKey :: Dynamic t Int</span>
  dNextKey <span class="ot">&lt;-</span> count eAdd





  <span class="fu">...</span></code></pre></div>
</section><section id="section-247" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="fu">...</span>

  <span class="co">-- eAdd     :: Event t Text</span>
  eAdd <span class="ot">&lt;-</span> addItemWidget

  <span class="co">-- dNextKey :: Dynamic t Int</span>
  dNextKey <span class="ot">&lt;-</span> count eAdd

  <span class="co">-- dMap     :: Dynamic t (Map Int Text)</span>
  dMap <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) Map.empty <span class="fu">$</span>
      Map.insert <span class="fu">&lt;$&gt;</span> current dNextKey <span class="fu">&lt;@&gt;</span> eAdd

  <span class="fu">...</span></code></pre></div>
</section><section id="section-248" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">todoItem ::</span> <span class="dt">MonadWidget</span> t m 
            <span class="co">-- The value of the text for the item</span>
         <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Text</span>
            <span class="co">-- Fires when item should be removed</span>
         <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())</code></pre></div>
</section><section id="section-249" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">dMap 
<span class="ot">  ::</span> <span class="dt">Dynamic</span> t (<span class="dt">Map</span> <span class="dt">Int</span> <span class="dt">Text</span>)









  </code></pre></div>
</section><section id="section-250" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">dMap 
<span class="ot">  ::</span> <span class="dt">Dynamic</span> t (<span class="dt">Map</span> <span class="dt">Int</span> <span class="dt">Text</span>)

todoItem
<span class="ot">  ::</span> <span class="dt">MonadWidget</span> t m
  <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Text</span>
  <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())




    </code></pre></div>
</section><section id="section-251" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">dMap 
<span class="ot">  ::</span> <span class="dt">Dynamic</span> t (<span class="dt">Map</span> <span class="dt">Int</span> <span class="dt">Text</span>)

todoItem 
<span class="ot">  ::</span> <span class="dt">MonadWidget</span> t m
  <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Text</span>
  <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())

list 
<span class="ot">  ::</span>         <span class="dt">Dynamic</span> t (<span class="dt">Map</span> k v     )
  <span class="ot">-&gt;</span>   (<span class="dt">Dynamic</span> t v <span class="ot">-&gt;</span> m a   ) 
  <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t (<span class="dt">Map</span> k a         ))</code></pre></div>
</section><section id="section-252" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">dMap 
<span class="ot">  ::</span> <span class="dt">Dynamic</span> t (<span class="dt">Map</span> <span class="dt">Int</span> <span class="dt">Text</span>)

todoItem
<span class="ot">  ::</span> <span class="dt">MonadWidget</span> t m
  <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Text</span>
  <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())

list dMap 
  <span class="ot">::</span>
       (<span class="dt">Dynamic</span> t <span class="dt">Text</span> <span class="ot">-&gt;</span> m a) 
  <span class="ot">-&gt;</span> m (<span class="dt">Dynamic</span> t (<span class="dt">Map</span> <span class="dt">Int</span> a       ))</code></pre></div>
</section><section id="section-253" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">dMap 
<span class="ot">  ::</span> <span class="dt">Dynamic</span> t (<span class="dt">Map</span> <span class="dt">Int</span> <span class="dt">Text</span>)

todoItem
<span class="ot">  ::</span> <span class="dt">MonadWidget</span> t m
  <span class="ot">=&gt;</span> <span class="dt">Dynamic</span> t <span class="dt">Text</span>
  <span class="ot">-&gt;</span> m (<span class="dt">Event</span> t ())

list dMap todoItem 
  <span class="ot">::</span>

     m (<span class="dt">Dynamic</span> t (<span class="dt">Map</span> <span class="dt">Int</span> (<span class="dt">Event</span> t ())))</code></pre></div>
</section><section id="section-254" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="co">-- Dynamic t (Map Int (Event t ()))</span>
  dmItems <span class="ot">&lt;-</span>           list dMap <span class="fu">$</span> \dv <span class="ot">-&gt;</span> 
                         todoItem dv</code></pre></div>
</section><section id="section-255" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="co">-- Dynamic t (Map Int (Event t ()))</span>
  dmItems <span class="ot">&lt;-</span> el <span class="st">&quot;ul&quot;</span> <span class="fu">.</span> list dMap <span class="fu">$</span> \dv <span class="ot">-&gt;</span> 
               el <span class="st">&quot;li&quot;</span> <span class="fu">.</span> todoItem <span class="fu">$</span> dv</code></pre></div>
</section><section id="section-256" class="slide level2">
<h2></h2>
<div id="examples-collection-add" class="demo">

</div>
</section><section id="section-257" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="kw">let</span>
    eRemoves <span class="fu">=</span>
    







      <span class="co">-- Dynamic t (Map Int (Event t ()))</span>
      dmItems</code></pre></div>
</section><section id="section-258" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="kw">let</span>
    eRemoves <span class="fu">=</span>
    





      <span class="co">-- Dynamic t (Event t (Map Int ()))</span>
      fmap mergeMap <span class="fu">$</span>
      <span class="co">-- Dynamic t (Map Int (Event t ()))</span>
      dmItems</code></pre></div>
</section><section id="section-259" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="kw">let</span>
    eRemoves <span class="fu">=</span>
    



      <span class="co">-- Behavior t (Event t (Map Int ()))</span>
      current <span class="fu">.</span>
      <span class="co">-- Dynamic t (Event t (Map Int ()))</span>
      fmap mergeMap <span class="fu">$</span>
      <span class="co">-- Dynamic t (Map Int (Event t ()))</span>
      dmItems</code></pre></div>
</section><section id="section-260" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="kw">let</span>
    eRemoves <span class="fu">=</span>
    

      <span class="co">-- Event t (Map Int ())</span>
      switch <span class="fu">.</span>
      <span class="co">-- Behavior t (Event t (Map Int ()))</span>
      current <span class="fu">.</span>
      <span class="co">-- Dynamic t (Event t (Map Int ()))</span>
      fmap mergeMap <span class="fu">$</span>
      <span class="co">-- Dynamic t (Map Int (Event t ()))</span>
      dmItems</code></pre></div>
</section><section id="section-261" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  <span class="kw">let</span>
    eRemoves <span class="fu">=</span>
      <span class="co">-- Event t [Int]</span>
      fmap Map.keys <span class="fu">.</span>
      <span class="co">-- Event t (Map Int ())</span>
      switch <span class="fu">.</span>
      <span class="co">-- Behavior t (Event t (Map Int ()))</span>
      current <span class="fu">.</span>
      <span class="co">-- Dynamic t (Event t (Map Int ()))</span>
      fmap mergeMap <span class="fu">$</span>
      <span class="co">-- Dynamic t (Map Int (Event t ()))</span>
      dmItems</code></pre></div>
</section><section id="section-262" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  dmText <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) Map.empty                 <span class="fu">$</span>
      Map.insert <span class="fu">&lt;$&gt;</span> current dNextKey <span class="fu">&lt;@&gt;</span> eAdd



  dmItems <span class="ot">&lt;-</span> el <span class="st">&quot;ul&quot;</span> <span class="fu">.</span> list dMap <span class="fu">$</span> \dv <span class="ot">-&gt;</span> 
    el <span class="st">&quot;li&quot;</span>  todoItem <span class="fu">$</span> dv








  </code></pre></div>
</section><section id="section-263" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  dmText <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) Map.empty <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      Map.insert <span class="fu">&lt;$&gt;</span> current dNextKey <span class="fu">&lt;@&gt;</span> eAdd

    ]

  dmItems <span class="ot">&lt;-</span> el <span class="st">&quot;ul&quot;</span> <span class="fu">.</span> list dMap <span class="fu">$</span> \dv <span class="ot">-&gt;</span> 
    el <span class="st">&quot;li&quot;</span>  todoItem <span class="fu">$</span> dv








  </code></pre></div>
</section><section id="section-264" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  dmText <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) Map.empty <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      Map.insert <span class="fu">&lt;$&gt;</span> current dNextKey <span class="fu">&lt;@&gt;</span> eAdd

    ]

  dmItems <span class="ot">&lt;-</span> el <span class="st">&quot;ul&quot;</span> <span class="fu">.</span> list dMap <span class="fu">$</span> \dv <span class="ot">-&gt;</span> 
    el <span class="st">&quot;li&quot;</span>  todoItem <span class="fu">$</span> dv

  <span class="kw">let</span>
    <span class="co">-- Event t [Int]</span>
    eRemoves <span class="fu">=</span>
      fmap Map.keys <span class="fu">.</span>
      switch <span class="fu">.</span>
      current <span class="fu">.</span>
      fmap mergeMap <span class="fu">$</span>
      dmItems</code></pre></div>
</section><section id="section-265" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">  dmText <span class="ot">&lt;-</span> foldDyn (<span class="fu">$</span>) Map.empty <span class="fu">.</span> mergeWith (<span class="fu">.</span>) <span class="fu">$</span> [
      Map.insert <span class="fu">&lt;$&gt;</span> current dNextKey <span class="fu">&lt;@&gt;</span> eAdd
    , flip (foldr Map.delete) <span class="fu">&lt;$&gt;</span> eRemoves
    ]

  dmItems <span class="ot">&lt;-</span> el <span class="st">&quot;ul&quot;</span> <span class="fu">.</span> list dMap <span class="fu">$</span> \dv <span class="ot">-&gt;</span> 
    el <span class="st">&quot;li&quot;</span>  todoItem <span class="fu">$</span> dv

  <span class="kw">let</span>
    <span class="co">-- Event t [Int]</span>
    eRemoves <span class="fu">=</span>
      fmap Map.keys <span class="fu">.</span>
      switch <span class="fu">.</span>
      current <span class="fu">.</span>
      fmap mergeMap <span class="fu">$</span>
      dmItems</code></pre></div>
</section><section id="section-266" class="slide level2">
<h2></h2>
<div id="examples-collection-remove" class="demo">

</div>
<!--
##

TODO add clear complete

##

<div class="demo" id="examples-collection-remove-complete"></div>
-->
</section></section>
<section><section id="conclusion" class="titleslide slide level1"><h1>Conclusion</h1></section><section id="section-267" class="slide level2">
<h2></h2>
</section></section>
<section><section id="reflex-frp-on-freenode" class="titleslide slide level1"><h1>reflex-frp on Freenode</h1></section><section id="section-268" class="slide level2">
<h2></h2>
<p>QuickRef.md</p>
</section><section id="section-269" class="slide level2">
<h2></h2>
<p>Real World Reflex</p>
</section><section id="section-270" class="slide level2">
<h2></h2>
<p>Part 2</p>
</section></section>
    </div>
  </div>

  <script src="reveal.js/lib/js/head.min.js"></script>
  <script src="reveal.js/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Transition style
        transition: 'none', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
              { src: 'reveal.js/plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>
